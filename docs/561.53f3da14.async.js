(self.webpackChunkreact_components=self.webpackChunkreact_components||[]).push([[561],{91167:function(ci,qt,k){"use strict";k.r(qt),k.d(qt,{AntdTheme:function(){return Xt},QkAreaDrawPeriodicChart:function(){return Zn},QkBtnGroupCollapsed:function(){return Un},QkCustomModal:function(){return rr},QkCustomTags:function(){return sr},QkDrawPeriodicChartPro:function(){return gr},QkDrawerForm:function(){return vr},QkFixedFooter:function(){return xr},QkGaoDeEchartMap:function(){return Ir},QkGaoDeMap:function(){return Qr},QkGenerateMathFormula:function(){return Or},QkImagePreview:function(){return Fr},QkModal:function(){return Yr},QkModalForm:function(){return Kr},QkMultideviceRender:function(){return Jr},QkProDescriptions:function(){return $r},QkProTable:function(){return na},QkQRCode:function(){return sa},QkSketchMap:function(){return ma},QkStackDrawPeriodicChart:function(){return Aa},QkTreeCard:function(){return Sa},QkUpload:function(){return Ka},attachmentSimpleListItemRender:function(){return Ja},downloadFile:function(){return ai},equipment:function(){return ri},firstAvailableRouter:function(){return ni},flatRoutes:function(){return ti},flatTree:function(){return Va},generateBreadcrumbs:function(){return _a},rand:function(){return ei},replaceState:function(){return En},useQkScrollLoad:function(){return qa}});var Qn=k(7731),Tn=k(89750),g=k(38497),r=k(96469),Rn=function(e){var t=e.children;return(0,r.jsx)(Qn.ZP,{locale:Tn.Z,theme:{token:{borderRadius:2,colorPrimary:"#54A349",colorLink:"#54A349"},components:{Button:{primaryShadow:"0 2px 0 rgba(84, 163, 73, 0.01)",borderRadius:2}}},children:t})},Xt=Rn,Pn=k(2927),Qe=k.n(Pn),On=k(8345),Je=k.n(On),Bn=k(39346),Q=k.n(Bn),le=k(84225),zn=k(44766),Ot=k.n(zn),Fn=function(e){return e.map(function(t){var n=0;for(var a in t.columns)if(Object.prototype.hasOwnProperty.call(t.columns,a)){var o=t.columns[a];n+=(o==null?void 0:o.list.reduce(function(l,i){return l+Number(i.value)},0))||0}return Q()(Q()({},t),{},{total:n})})},Wn=function(e){return e.reduce(function(t,n){return t+n.value},0)},Vt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;try{return e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t})}catch(n){return e}};function _t(s,e){var t=Q()({},s);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=e[n],o=t[n];Je()(a)!=="object"?t[n]=a:(Je()(o)!=="object"&&(t[n]=Q()({},o)),t[n]=_t(o,a))}return t}var Hn=function(e){var t,n,a,o,l,i,c,u,h,d,p,b,w,S,M,T=e.options,A=T===void 0?{}:T,O=e.data,P=(0,g.useRef)(null),E=(0,g.useRef)(null),x={margin:{top:10,right:10,bottom:10,left:10},yAxios:{width:50,height:60},strip:{width:28,margin:20,radius:15,minHeight:30},background:"transparent",height:390};A=_t(x,A);var D=(t=(n=A)===null||n===void 0?void 0:n.height)!==null&&t!==void 0?t:390,W=(a=(o=A)===null||o===void 0||(o=o.strip)===null||o===void 0?void 0:o.width)!==null&&a!==void 0?a:28,$=(l=(i=A)===null||i===void 0||(i=i.strip)===null||i===void 0?void 0:i.margin)!==null&&l!==void 0?l:20,B=(c=(u=A)===null||u===void 0||(u=u.strip)===null||u===void 0?void 0:u.radius)!==null&&c!==void 0?c:15,C=(h=(d=A)===null||d===void 0||(d=d.strip)===null||d===void 0?void 0:d.minHeight)!==null&&h!==void 0?h:30,I=(p=A.background)!==null&&p!==void 0?p:"transparent",Y=(b=(w=A)===null||w===void 0||(w=w.yAxios)===null||w===void 0?void 0:w.width)!==null&&b!==void 0?b:50,z=(S=(M=A)===null||M===void 0||(M=M.yAxios)===null||M===void 0?void 0:M.height)!==null&&S!==void 0?S:390,K=0,Z=0,ce=0,G=0;if(typeof A.margin=="number"){var te;K=(te=A.margin)!==null&&te!==void 0?te:0,Z=A.margin,ce=A.margin,G=A.margin}else if(Je()(A.margin)==="object"){var ne,re,oe,we,Ae,Me,Ce,ue;K=(ne=(re=A)===null||re===void 0||(re=re.margin)===null||re===void 0?void 0:re.left)!==null&&ne!==void 0?ne:0,Z=(oe=(we=A.margin)===null||we===void 0?void 0:we.top)!==null&&oe!==void 0?oe:0,ce=(Ae=(Me=A)===null||Me===void 0||(Me=Me.margin)===null||Me===void 0?void 0:Me.right)!==null&&Ae!==void 0?Ae:0,G=(Ce=(ue=A.margin)===null||ue===void 0?void 0:ue.bottom)!==null&&Ce!==void 0?Ce:0}console.log({marginLeft:K,marginTop:Z,marginRight:ce,marginBottom:G}),console.log(A),O=Fn(O);var J=Math.max.apply(Math,Qe()(O.map(function(m){var f;return(f=m==null?void 0:m.total)!==null&&f!==void 0?f:0}))),H=function(f){return new le.fabric.Line(f,{stroke:"#E6E6E6",strokeWidth:1,selectable:!1,hoverCursor:"normal"})},j=function(f){return new le.fabric.Line(f,{stroke:"#CCD6EB",strokeWidth:1,selectable:!1,hoverCursor:"normal"})},L=function(f,y,N){return new le.fabric.Text(f,{left:y,top:N,fontSize:12,fontFamily:"Arial",selectable:!1,hoverCursor:"normal",fill:"#666666"})},v=function(f){var y=f.canvas,N=f.width,R=N===void 0?0:N;{var U=K+Y,F=D-G,q=R-ce,V=F;y.add(j([U,F,q,V]))}{var ae=K+Y,ee=Z,_=K+Y,X=D-G;y.add(j([ae,ee,_,X]))}for(var ie=Math.floor((D-Z-G)/z),Le=[],de=Math.ceil(J/ie),ge=0;ge<J;)Le.push(ge),ge+=de;Le.push(ge);for(var ve=0;ve<Le.length;ve++){var xe=K+Y,je=D-G-ve*z,ke=R-ce,Ve=je;y.add(H([xe,je,ke,Ve]));{var Se=String(Vt(Le[ve],1)),ye=K,_e=D-Z-G-ve*z,Fe=L(Se,ye,_e);y.add(Fe),Fe.set({top:Math.ceil(je-Fe.height/2)})}}for(var Ne=Math.ceil((R-K-ce-Y)/O.length),et=z/de,$e=[],Ge=function(){var Ie=O[Ue],Ee=Ie.columns;{var qe,fe=K+Y+Ue*Ne,He=Math.ceil(et*((qe=Ie==null?void 0:Ie.total)!==null&&qe!==void 0?qe:1));He<C&&(He=C+5);var nt=D-G-He,be=new le.fabric.Rect({left:fe,top:nt,width:Ne,height:He,selectable:!1,hoverCursor:"normal",opacity:.05,fill:new le.fabric.Gradient({type:"linear",coords:{x1:0,y1:0,x2:0,y2:He},colorStops:[{offset:0,color:"#6AC1FF"},{offset:.5,color:"#A4E2FF"}]})});y.add(be);{var rt=Ne-(Object.keys(Ee).length*W+($*Object.keys(Ee).length-1)),kt=Math.floor(fe+rt/2);Object.keys(Ee).forEach(function(at,Qt){var xt,ft,wt,jt;kt=Math.floor(fe+2+Qt*60+rt/2);var Ke=W,ct=Math.ceil(Wn(((xt=Ee[at])===null||xt===void 0?void 0:xt.list)||[])*et*.9);ct=ct<C?C:ct;var Mt=D-G-ct-2,Te=new le.fabric.Rect({left:kt,top:Mt,width:Ke,height:ct,fill:(ft=Ee[at])===null||ft===void 0?void 0:ft.background,stroke:(wt=Ee[at])===null||wt===void 0?void 0:wt.background,selectable:!1,hoverCursor:"normal",rx:15,ry:15});y.add(Te);var se=at.toUpperCase()+Object.keys(Ee).length,me=new le.fabric.Text(se,{left:Te.left,top:Te.top,fontSize:12,fontFamily:"Arial",selectable:!1,hoverCursor:"normal",fill:(jt=Ee[at])===null||jt===void 0?void 0:jt.color});me.set({left:Math.ceil(Te.left+(Te.width-me.width)/2),top:Math.ceil(Te.top+(Te.height-me.height)/2)}),y.add(me)})}{var dt,gt="WMh",ut="".concat(Vt(Number(Ie.total),2),"  ").concat(gt,`
 `).concat(Ie.start.substring(0,4)," ").concat(Ie.start.substring(5)," - ").concat(Ie.end.substring(5)),Kt=be.left,Xe=D-G-((dt=be==null?void 0:be.height)!==null&&dt!==void 0?dt:0)-50,ot=new le.fabric.Text(ut,{left:Kt,top:Xe,textAlign:"center",fontSize:14,fontFamily:"Arial",fill:"#000",selectable:!1,hoverCursor:"normal"}),lt=ut.indexOf(gt);ot.setSelectionStyles({fill:"#666666"},lt,lt+gt.length),y.add(ot),ot.set({left:Math.ceil(be.left+(be.width-ot.width)/2)})}{var yt,Ze=K+Y+Ue*Ne+2,We=(yt=D-G-(be==null?void 0:be.height))!==null&&yt!==void 0?yt:0,At=Ne*(Ue+1)+K+Y+2,vt=We;$e.push({x:Ze,y:We},{x:At,y:vt})}}},Ue=0;Ue<O.length;Ue++)Ge();{var pt=new le.fabric.Polyline($e,{fill:"transparent",stroke:"#01B5D5",strokeWidth:2,selectable:!1,hoverCursor:"normal"});y.add(pt)}};return(0,g.useLayoutEffect)(function(){var m,f,y=(m=(f=E.current)===null||f===void 0?void 0:f.offsetWidth)!==null&&m!==void 0?m:0,N={selection:!1,width:y,height:D,backgroundColor:I},R=new le.fabric.Canvas(P.current,N);v({canvas:R,width:y});var U=Ot().debounce(function(){var F=document.getElementById("canvas-container"),q=F==null?void 0:F.clientWidth,V=F==null?void 0:F.clientHeight;R.setWidth(q),R.setHeight(V),R.discardActiveObject(),R.requestRenderAll(),R.clear(),v({canvas:R,width:q})},500);return window.addEventListener("resize",U),function(){window.removeEventListener("resize",U)}},[]),(0,r.jsx)("div",{className:"canvas-container",id:"canvas-container",style:{height:"100%"},ref:E,children:(0,r.jsx)("canvas",{ref:P,id:"canvas"})})},Zn=Hn,en=k(12299),ze=k(98823),Yn=k(59190),Bt=k(9064),Gn=function(e){var t=e.data,n=e.onClick,a=[],o=[];return t.filter(function(l){return l.show!==!1}).forEach(function(l){l.collapsed?a.push(l):o.push(l)}),(0,r.jsxs)(r.Fragment,{children:[o.map(function(l){return(0,r.jsx)(ze.ZP,{disabled:l.disabled===!0,type:"link",onClick:function(){typeof n=="function"&&n(l.key)},children:l.label},l.key)}),a.length>0&&(0,r.jsx)(Yn.Z,{arrow:!0,menu:{items:a,onClick:function(i){typeof n=="function"&&n(i.key)}},children:(0,r.jsx)(ze.ZP,{type:"link",children:(0,r.jsxs)(Bt.Z,{children:["\u66F4\u591A",(0,r.jsx)(en.Z,{})]})})})]})},Un=Gn,Kn=k(9083),he=k.n(Kn),Jn=k(84054),$n=k(26869),Ye=k.n($n),ht=k(2060),qn=k(76087),zt=k(46022),Xn=Object.defineProperty,tn=Object.getOwnPropertySymbols,Vn=Object.prototype.hasOwnProperty,_n=Object.prototype.propertyIsEnumerable,nn=(s,e,t)=>e in s?Xn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,er=(s,e)=>{for(var t in e||(e={}))Vn.call(e,t)&&nn(s,t,e[t]);if(tn)for(var t of tn(e))_n.call(e,t)&&nn(s,t,e[t]);return s};const si=s=>React.createElement("svg",er({width:17,height:16,xmlns:"http://www.w3.org/2000/svg"},s),React.createElement("title",null,"\u8DEF\u5F84"),React.createElement("path",{d:"m9.662 8 6.515-6.517a.854.854 0 0 0 0-1.2L16.14.246a.853.853 0 0 0-1.2 0L8.427 6.773 1.912.247a.853.853 0 0 0-1.2 0L.677.282a.838.838 0 0 0 0 1.2L7.19 8 .677 14.517a.854.854 0 0 0 0 1.2l.035.036a.853.853 0 0 0 1.2 0l6.515-6.517 6.514 6.517a.853.853 0 0 0 1.2 0l.036-.035a.854.854 0 0 0 0-1.2L9.662 8Z",fill:"#B0BBCD",fillRule:"nonzero"}));var tr="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTkuNjYyIDggNi41MTUtNi41MTdhLjg1NC44NTQgMCAwIDAgMC0xLjJMMTYuMTQuMjQ2YS44NTMuODUzIDAgMCAwLTEuMiAwTDguNDI3IDYuNzczIDEuOTEyLjI0N2EuODUzLjg1MyAwIDAgMC0xLjIgMEwuNjc3LjI4MmEuODM4LjgzOCAwIDAgMCAwIDEuMkw3LjE5IDggLjY3NyAxNC41MTdhLjg1NC44NTQgMCAwIDAgMCAxLjJsLjAzNS4wMzZhLjg1My44NTMgMCAwIDAgMS4yIDBsNi41MTUtNi41MTcgNi41MTQgNi41MTdhLjg1My44NTMgMCAwIDAgMS4yIDBsLjAzNi0uMDM1YS44NTQuODU0IDAgMCAwIDAtMS4yTDkuNjYyIDhaIiBmaWxsPSIjQjBCQkNEIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=",nr=function(e){var t=e.title,n=e.width,a=n===void 0?500:n,o=e.children,l=e.okText,i=l===void 0?"\u786E\u5B9A":l,c=e.cancelText,u=c===void 0?"\u53D6\u6D88":c,h=e.onCancel,d=e.onOk,p=e.visible,b=p===void 0?!0:p,w=e.footerRender,S=w===void 0?!0:w,M=e.theme,T=M===void 0?"PC":M,A=e.closable,O=A===void 0?!0:A,P=e.okRender,E=P===void 0?!0:P,x=e.cancelRender,D=x===void 0?!0:x,W=e.zIndex,$=W===void 0?1005:W,B=function(){return(0,r.jsx)("div",{className:"qk-custom-modal-footer",children:(0,r.jsxs)("div",{className:"btn-group flex items-center justify-center gap-[20px]",children:[D&&(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(ze.ZP,{type:"default",size:"large",shape:"round",block:!0,onClick:function(){typeof h=="function"&&h()},children:u})}),E&&D&&(0,r.jsx)("div",{className:"h-full",children:(0,r.jsx)(Jn.Z,{type:"vertical",style:{height:"30px"}})}),E&&(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(ze.ZP,{block:!0,type:"primary",size:"large",shape:"round",onClick:function(){typeof d=="function"&&d()},children:i})})]})})},C=function(){return(0,r.jsx)("div",{className:"qk-custom-modal-footer",children:(0,r.jsx)("div",{className:"btn-group flex justify-end items-end",children:(0,r.jsxs)(Bt.Z,{children:[D&&(0,r.jsx)(ze.ZP,{type:"default",onClick:function(){typeof h=="function"&&h()},children:u}),E&&(0,r.jsx)(ze.ZP,{type:"primary",onClick:function(){typeof d=="function"&&d()},children:i})]})})})};return(0,r.jsxs)(g.Fragment,{children:[(0,r.jsx)(zt.Z,{unmountOnExit:!0,appear:!0,in:b,timeout:200,classNames:"qk-custom-modal",children:(0,r.jsx)("div",{style:{zIndex:$-1},className:"qk-custom-modal"})}),(0,r.jsx)(zt.Z,{unmountOnExit:!0,appear:!0,in:b,timeout:200,classNames:"qk-custom-content",children:(0,r.jsx)(Xt,{children:(0,r.jsx)("div",{style:{zIndex:$},className:Ye()("qk-custom-modal-wrap flex justify-center items-center","qk-custom-modal--".concat(T.toLowerCase())),children:(0,r.jsxs)("div",{className:"qk-custom-modal-center",style:{width:a+"px"},children:[(0,r.jsxs)("div",{className:"qk-custom-modal-header flex",children:[(0,r.jsx)("div",{className:"qk-custom-modal-header__title flex-1",children:(0,r.jsx)("span",{children:t})}),O&&(0,r.jsx)("div",{className:"qk-custom-modal-header__btn-group flex justify-center items-center",children:(0,r.jsx)("div",{className:"cursor-pointer btn-close",onClick:function(){typeof h=="function"&&h()},children:(0,r.jsx)("img",{src:tr,alt:"",className:"block"})})})]}),(0,r.jsx)("div",{className:"qk-custom-modal-content",children:o}),S&&T==="PC"&&(0,r.jsx)(C,{}),S&&T==="APP"&&(0,r.jsx)(B,{})]})})})})]})},Ft=function(e){return(0,ht.createPortal)((0,r.jsx)(nr,Q()({},e)),document.body)},rr=Ft,rn=g.forwardRef(function(s,e){var t=(0,g.useState)(!0),n=he()(t,2),a=n[0],o=n[1];return(0,g.useImperativeHandle)(e,function(){return{setVisible:o}}),(0,r.jsx)(Ft,Q()(Q()({},s),{},{visible:a}))});rn.displayName="QkCustomModalForward";var ar=function(e){var t=g.createRef(),n=document.createElement("div"),a=(0,qn.createRoot)(n);return a.render((0,r.jsx)(rn,Q()(Q()({},e),{},{ref:t}))),document.body.append(n),{destroy:function(){var l;(l=t.current)===null||l===void 0||l.setVisible(!1),setTimeout(function(){a.unmount(),document.body.removeChild(n)},200)}}};Ft.Create=ar;var ir={},or=function(e){var t=e.rows,n=e.gap,a=(0,g.useState)([]),o=he()(a,2),l=o[0],i=o[1],c=(0,g.useRef)([]),u=(0,g.useRef)(0),h=(0,g.useRef)(0),d=(0,g.useState)([]),p=he()(d,2),b=p[0],w=p[1],S=function(E){return E.map(function(x){return{value:x,render:!0,width:0,key:Math.random().toString()}})},M=function(E){for(var x=c.current,D=[],W=0;W<E;W++){D.push([]);for(var $=0,B=D.flat().length;B<x.length;B++)$+=x[B].width+n,$<u.current-(E-1===W?h.current:0)&&D[W].push(x[B])}i(D.flat())},T=function(E,x){c.current[E].width=x,l.length-1===E&&M(t)},A=function(E){u.current=E},O=function(E){h.current=E};return(0,g.useEffect)(function(){var P=S(b);c.current=P,i(P)},[b]),{formatted:l,widthBackfilling:T,setContainerWidth:A,setMoreWidth:O,setDataList:w}},lr=function(e){var t=e.value,n=e.onLoadingCompleted,a=e.itemStyle,o=(0,g.useRef)(null);return(0,g.useLayoutEffect)(function(){var l;n==null||n(((l=o.current)===null||l===void 0?void 0:l.offsetWidth)||0)},[]),(0,r.jsx)("span",{style:a,ref:o,children:t})},cr=function(e){var t=e.data,n=t===void 0?[]:t,a=e.gap,o=a===void 0?10:a,l=e.itemStyle,i=l===void 0?{}:l,c=e.rows,u=c===void 0?1:c,h=e.moreRender,d=h===void 0?!0:h,p=e.moreText,b=p===void 0?"\u66F4\u591A":p,w=e.onLoadingCompleted,S=(0,g.useRef)(null),M=(0,g.useRef)(null),T=(0,g.useState)(!0),A=he()(T,2),O=A[0],P=A[1],E=or({rows:u,gap:o}),x=E.formatted,D=E.widthBackfilling,W=E.setContainerWidth,$=E.setMoreWidth,B=E.setDataList;return(0,g.useLayoutEffect)(function(){var C,I;W(((C=S.current)===null||C===void 0?void 0:C.offsetWidth)||0),$(((I=M.current)===null||I===void 0?void 0:I.offsetWidth)||0)},[]),(0,g.useEffect)(function(){B(n)},[n]),(0,g.useEffect)(function(){w==null||w({isMore:n.length!==x.length}),P(n.length!==x.length)},[n,x]),(0,r.jsxs)("div",{className:Ye()("flex flex-auto flex-wrap",ir["qk-custom-tags"]),ref:S,style:{gap:o+"px"},children:[x.map(function(C,I){return C.render&&(0,r.jsx)(lr,{value:C.value,itemStyle:i,onLoadingCompleted:function(z){D(I,z)}},C.key)}),(0,r.jsx)("div",{ref:M,children:function(){if(typeof d=="function"&&O)return d((x==null?void 0:x.length)||0);if(d&&O)return(0,r.jsx)("div",{children:b})}()})]})},sr=cr,dr=k(84157),ur=function(e){return(0,r.jsx)(dr.a,Q()({},e))},vr=ur,fr=k(5599),an=k.n(fr),hr=function(e){var t={},n=an()(e),a;try{for(n.s();!(a=n.n()).done;){var o,l,i=a.value;i.start=(o=i.start)===null||o===void 0?void 0:o.replace(/\//g,"-"),i.end=(l=i.end)===null||l===void 0?void 0:l.replace(/\//g,"-"),t[i.id]?t[i.id].push(i):t[i.id]=[i]}}catch(c){n.e(c)}finally{n.f()}return t},on=function(e){var t,n,a=e.containerWidth,o=a===void 0?0:a,l=e.fabricText;if((t=o>(l==null?void 0:l.width))!==null&&t!==void 0&&t)return l==null?void 0:l.text;for(var i=(l==null?void 0:l.width)/(l==null||(n=l.text)===null||n===void 0?void 0:n.length),c=0,u="";u.length*i<o-50;)u+=l.text.substr(c,1),c++;return u+"..."},mr=function(e){var t=new Date(Math.min.apply(Math,Qe()(e.map(function(a){return new Date(a.start).getTime()})))),n=new Date(Math.max.apply(Math,Qe()(e.map(function(a){return new Date(a.end).getTime()}))));return{minDate:new Date(t),maxDate:new Date(n)}},Lt=function(e,t){for(var n=[],a=new Date(e),o=new Date(t);a<=o;)n.push(a.toISOString().slice(0,10)),a.setDate(a.getDate()+1);return n},ln=function(e,t){if(!t)return{left:0,top:0};var n=Math.ceil(e.left+e.width/2-t.offsetWidth/2),a=Math.ceil(e.top-t.offsetHeight-10);return{left:n,top:a}};function cn(s,e){var t=Q()({},s);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=e[n],o=t[n];Je()(a)!=="object"?t[n]=a:(Je()(o)!=="object"&&(t[n]=Q()({},o)),t[n]=cn(o,a))}return t}var pr=function(e){var t,n,a,o,l,i,c,u,h=e.options,d=h===void 0?{}:h,p=e.data,b=(0,g.useRef)(null),w=(0,g.useRef)(null),S=(0,g.useRef)(null),M=(0,g.useRef)(null),T=(0,g.useState)({left:0,top:0,text:"",show:!1}),A=he()(T,2),O=A[0],P=A[1],E=(0,g.useRef)(0),x=hr(p),D={height:28,diyDrawXaxios:!1,margin:{top:50,right:10,bottom:10,left:10},transparent:"transparent",xAxios:{labelWidth:120,width:80,show:!0},strip:{height:28,margin:20},yAxios:{nameTextStyle:{color:"#000",fontSize:12,underline:!1},showToolTip:!0}};d=cn(D,d);var W=0,$=(t=(n=d)===null||n===void 0||(n=n.strip)===null||n===void 0?void 0:n.height)!==null&&t!==void 0?t:28,B=(a=(o=d)===null||o===void 0||(o=o.strip)===null||o===void 0?void 0:o.margin)!==null&&a!==void 0?a:28,C=(l=(i=d)===null||i===void 0||(i=i.xAxios)===null||i===void 0?void 0:i.width)!==null&&l!==void 0?l:80,I=(c=(u=d)===null||u===void 0||(u=u.yAxios)===null||u===void 0?void 0:u.width)!==null&&c!==void 0?c:120,Y=0,z=0,K=0,Z=0;if(typeof d.margin=="number")Y=d.margin,z=d.margin,K=d.margin,Z=d.margin;else if(Je()(d.margin)==="object"){var ce,G,te,ne,re,oe,we,Ae;Y=(ce=(G=d)===null||G===void 0||(G=G.margin)===null||G===void 0?void 0:G.left)!==null&&ce!==void 0?ce:0,z=(te=(ne=d.margin)===null||ne===void 0?void 0:ne.top)!==null&&te!==void 0?te:0,K=(re=(oe=d)===null||oe===void 0||(oe=oe.margin)===null||oe===void 0?void 0:oe.right)!==null&&re!==void 0?re:0,Z=(we=(Ae=d.margin)===null||Ae===void 0?void 0:Ae.bottom)!==null&&we!==void 0?we:0}var Me=Object.keys(x).length;W||(W=z+Z+Me*$+Me*B+B);var Ce=function(f,y){y.show?P(function(N){return Q()(Q()({},N),y)}):(E.current&&clearTimeout(E.current),E.current=setTimeout(function(){P(function(N){return Q()(Q()({},N),{},{show:!1})})},1e3))},ue=function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#979797";return new le.fabric.Line(f,{stroke:y,strokeWidth:1,opacity:.2,selectable:!1,hoverCursor:"normal",strokeDashArray:[5,5]})},J=function(f){return new le.fabric.Line(f,{stroke:"#D7D7D7",strokeWidth:1,selectable:!1,hoverCursor:"normal"})},H=function(f){var y=f.text,N=new le.fabric.Rect({left:0,top:0,width:100,height:30,fill:"rgba(0,0,0,0.8)",stroke:"rgba(0,0,0,0.8)",selectable:!1,hoverCursor:"normal",rx:4,ry:4}),R=new le.fabric.Text(y,{left:0,top:0,fontSize:12,fontFamily:"Arial",selectable:!1,hoverCursor:"normal",fill:"#fff"});R.set({left:N.width/2-R.width/2,top:N.height/2-R.height/2});var U=new le.fabric.Group([]);return U.addWithUpdate(N),U.addWithUpdate(R),U},j=function(f,y,N){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#666666",U=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,F=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"normal",q=arguments.length>6&&arguments[6]!==void 0?arguments[6]:12;return new le.fabric.Text(f,{left:y,top:N,fontSize:q,fontFamily:"Arial",selectable:!1,hoverCursor:F,fill:R,underline:U})},L=function(f){var y,N=f.canvas,R=f.width,U=R===void 0?0:R;{var F=Y+I,q=z,V=U-K,ae=q;N.add(J([F,q,V,ae]))}{var ee=U-Y-K-1,_=W-z-Z-1,X=z+1,ie=Y,Le=new le.fabric.Rect({left:ie,top:X,width:ee,height:_,fill:"#F9F9F9",stroke:"#F9F9F9",selectable:!1,hoverCursor:"normal"});N.add(Le)}for(var de=mr(p),ge=de.minDate,ve=de.maxDate,xe=Lt(ge,ve),je=Math.floor((U-Y-K-I)/C),ke=Math.ceil(xe.length/je),Ve=[],Se=0;Se<xe.length;Se++){var ye=xe[Se];Se%ke===0&&Ve.push(ye)}for(var _e=C/ke,Fe=0;Fe<Ve.length;Fe++){var Ne;if((Ne=d)!==null&&Ne!==void 0&&(Ne=Ne.xAxios)!==null&&Ne!==void 0&&Ne.show){var et=Y+I+Fe*C,$e=z,Ge=et,Ue=W-Z;N.add(ue([et,$e,Ge,Ue]));var pt=String(Ve[Fe]).replace(/-/g,"/"),tt=Y+I+Fe*C,Ie=z,Ee=j(pt,tt,Ie);N.add(Ee),Ee.set({left:Math.floor(tt-Ee.width/2),top:$e-Math.floor(Ee.height+10)})}}if((y=d)!==null&&y!==void 0&&y.diyDrawXaxios)for(var qe={left:0,width:0},fe=0;fe<xe.length;fe++){var He=xe[fe];if(new Date(He).getDate()===1||fe===0||fe===xe.length-1){var nt=Math.ceil(Y+I+(Lt(new Date(ge),new Date(He)).length-1)*_e),be=z,rt=nt,kt=W-Z,dt=ue([nt,be,rt,kt]);N.add(dt);var gt=fe===0||fe===xe.length-1?String(He.replace(/-/g,"/")):String(He).substring(0,7).replace(/-/g,"/"),ut=nt,Kt=z,Xe=j(gt,ut,Kt);N.add(Xe);var ot=Math.floor(ut-Xe.width/2);Xe.set({left:ot,top:be-Math.floor(Xe.height+10)}),qe.left+qe.width>ut-Xe.width/2&&fe!==0&&(Xe.set("visible",!1),dt.set("visible",!1)),qe={left:ot,width:Xe.width}}}Object.keys(x).forEach(function(lt,yt){var Ze,We,At=Y,vt=z+B+(B+$)*yt,at=I,Qt=$,xt=new le.fabric.Rect({left:At,top:vt,width:at,height:Qt,fill:"transparent",stroke:"transparent",selectable:!1,hoverCursor:"normal"});N.add(xt);var ft=String(x[lt][0].name),wt=At,jt=vt,Ke=j(ft,wt,jt,(Ze=d)===null||Ze===void 0||(Ze=Ze.yAxios)===null||Ze===void 0||(Ze=Ze.nameTextStyle)===null||Ze===void 0?void 0:Ze.color,(We=d)===null||We===void 0||(We=We.yAxios)===null||We===void 0||(We=We.nameTextStyle)===null||We===void 0?void 0:We.underline,"pointer",15);Ke.on("mousedown",function(Te){var se;if(typeof((se=d)===null||se===void 0||(se=se.yAxios)===null||se===void 0?void 0:se.onClick)=="function"){var me;(me=d)===null||me===void 0||(me=me.yAxios)===null||me===void 0||me.onClick(x[lt])}}),Ke.set({text:on({containerWidth:at,fabricText:Ke})}),Ke.on("mouseover",function(Te){var se,me,Re=Te.target;if(typeof((se=d)===null||se===void 0||(se=se.yAxios)===null||se===void 0?void 0:se.onMouseout)=="function"){var Pe;(Pe=d)===null||Pe===void 0||(Pe=Pe.yAxios)===null||Pe===void 0||Pe.onMouseout(Re)}if((me=d)!==null&&me!==void 0&&(me=me.yAxios)!==null&&me!==void 0&&me.showToolTip){var Tt=ln(Re,S==null?void 0:S.current),Jt=Tt.left,Rt=Tt.top;Ce("mouseover",Q()(Q()({},O),{},{text:ft,left:Jt,top:Rt,show:!0}))}}),Ke.on("mouseout",function(Te){var se,me=Te.target;if(typeof((se=d)===null||se===void 0||(se=se.yAxios)===null||se===void 0?void 0:se.onMouseout)=="function"){var Re;(Re=d)===null||Re===void 0||(Re=Re.yAxios)===null||Re===void 0||Re.onMouseout(me)}Ce("mouseout",{show:!1})}),N.add(Ke),Ke.set({left:At,top:Math.floor(vt+(Qt-Ke.height)/2)});for(var ct=function(){var se=x[lt][Mt],me=Math.ceil(Y+I+(Lt(new Date(ge),new Date(se.start)).length-1)*_e),Re=vt,Pe=_e*(Lt(new Date(se.start),new Date(se.end)).length-1),Tt=$,Jt=new le.fabric.Rect({left:me,top:Re,width:Pe,height:Tt,fill:se.background,stroke:se.background,selectable:!1,hoverCursor:"normal"}),Rt="".concat(String(se.start).replace(/-/g,"/")," - ").concat(String(se.end).replace(/-/g,"/")),Dn=me,ii=Re,st=j(Rt,Dn,ii,"#fff");st.width>Pe&&st.set({text:on({containerWidth:Pe,fabricText:st})}),st.set({left:Math.floor(Dn+((Pe!=null?Pe:0)-st.width)/2),top:Math.floor(Re+($-st.height)/2)});var Ct=new le.fabric.Group([],{selectable:!1,hoverCursor:"pointer"});Ct.addWithUpdate(Jt),Ct.addWithUpdate(st),N.add(Ct),N.renderAll(),Ct.on("mouseover",function($t){var Oe,Pt=$t.target;if(typeof((Oe=d)===null||Oe===void 0||(Oe=Oe.strip)===null||Oe===void 0?void 0:Oe.onMouseover)=="function"){var Be;(Be=d)===null||Be===void 0||(Be=Be.strip)===null||Be===void 0||Be.onMouseover(Pt)}var kn=ln(Pt,S==null?void 0:S.current),oi=kn.left,li=kn.top;Ce("mouseover",{text:Rt,left:oi,top:li,show:!0})}),Ct.on("mouseout",function($t){var Oe,Pt=$t.target;if(typeof((Oe=d)===null||Oe===void 0||(Oe=Oe.strip)===null||Oe===void 0?void 0:Oe.onMouseout)=="function"){var Be;(Be=d)===null||Be===void 0||(Be=Be.strip)===null||Be===void 0||Be.onMouseout(Pt)}Ce("mouseout",{show:!1})})},Mt=0;Mt<x[lt].length;Mt++)ct()})},v=Ot().debounce(function(){var m=document.getElementById("canvas-container"),f=m==null?void 0:m.clientWidth,y=m==null?void 0:m.clientHeight;M.current.setWidth(f),M.current.setHeight(y),M.current.clear(),L({canvas:M.current,width:f})},500);return(0,g.useLayoutEffect)(function(){var m,f,y=(m=(f=w.current)===null||f===void 0?void 0:f.offsetWidth)!==null&&m!==void 0?m:0,N={selection:!1,width:y,height:W,backgroundColor:d.background};M.current=new le.fabric.Canvas(b.current,N)},[]),(0,g.useLayoutEffect)(function(){return v(),window.addEventListener("resize",v),function(){window.removeEventListener("resize",v)}},[JSON.stringify(p)]),(0,r.jsxs)("div",{className:"canvas-container",id:"canvas-container",style:{height:"100%"},ref:w,children:[(0,r.jsx)("div",{ref:S,style:{left:O.left,top:O.top},className:"canvas-tooltip ".concat(O.show?"canvas-tooltip--show":"canvas-tooltip--hide"),children:O.text}),(0,r.jsx)("canvas",{ref:b,id:"canvas"})]})},gr=pr,yr={footer:"fSztNXfks0QwRi39e6r_"},Ar=function(e){var t=e.children,n=e.className,a=e.zIndex,o=a===void 0?"9":a,l=e.show,i=l===void 0?!0:l,c=(0,g.useRef)(null),u=(0,g.useState)(60),h=he()(u,2),d=h[0],p=h[1];return(0,g.useLayoutEffect)(function(){var b,w;p((b=(w=c.current)===null||w===void 0?void 0:w.offsetHeight)!==null&&b!==void 0?b:60)},[]),(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)("div",{style:{height:d+"px"}}),(0,r.jsx)("div",{style:{zIndex:o},ref:c,className:Ye()("fixed",n,yr.footer),children:t})]})},xr=Ar,wr=k(43953),De=k.n(wr),jr=k(91184),it=k.n(jr),Mr=k(4510),sn=k.n(Mr),di=k(66795),Cr=k(76691),Lr=k(37240),dn=k(17165),un=k(14822),St=[{citycode:[],adcode:"440000",name_cn:"\u5E7F\u4E1C",name_en:"Guangdong",center:"113.280637,23.125178",level:"province",districts:[]},{citycode:[],adcode:"410000",name_cn:"\u6CB3\u5357",name_en:"Henan",center:"113.665412,34.757975",level:"province",districts:[]},{citycode:[],adcode:"150000",name_cn:"\u5185\u8499\u53E4",name_en:"Inner Mongolia",center:"111.670801,40.818311",level:"province",districts:[],position:"top"},{citycode:[],adcode:"230000",name_cn:"\u9ED1\u9F99\u6C5F",name_en:"Heilongjiang",center:"126.642464,45.756967",level:"province",districts:[],position:"top"},{citycode:[],adcode:"650000",name_cn:"\u65B0\u7586",name_en:"Xinjiang",center:"87.617733,43.792818",level:"province",districts:[]},{citycode:[],adcode:"420000",name_cn:"\u6E56\u5317",name_en:"Hubei",center:"114.298572,30.584355",level:"province",districts:[]},{citycode:[],adcode:"210000",name_cn:"\u8FBD\u5B81",name_en:"Liaoning",center:"123.429096,41.796767",level:"province",districts:[]},{citycode:[],adcode:"370000",name_cn:"\u5C71\u4E1C",name_en:"Shandong",center:"117.000923,36.675807",level:"province",districts:[]},{citycode:[],adcode:"610000",name_cn:"\u9655\u897F",name_en:"Shaanxi",center:"108.948024,34.263161",level:"province",districts:[]},{citycode:"021",adcode:"310000",name_cn:"\u4E0A\u6D77",name_en:"Shanghai",center:"121.472644,31.231706",level:"province",districts:[],position:"right"},{citycode:[],adcode:"520000",name_cn:"\u8D35\u5DDE",name_en:"Guizhou",center:"106.713478,26.578343",level:"province",districts:[]},{citycode:"023",adcode:"500000",name_cn:"\u91CD\u5E86",name_en:"Chongqing",center:"106.504962,29.533155",level:"province",districts:[],position:"right"},{citycode:[],adcode:"540000",name_cn:"\u897F\u85CF",name_en:"Tibet",center:"91.132212,29.660361",level:"province",districts:[]},{citycode:[],adcode:"340000",name_cn:"\u5B89\u5FBD",name_en:"Anhui",center:"117.283042,31.86119",level:"province",districts:[],position:"top"},{citycode:[],adcode:"350000",name_cn:"\u798F\u5EFA",name_en:"Fujian",center:"119.306239,26.075302",level:"province",districts:[]},{citycode:[],adcode:"430000",name_cn:"\u6E56\u5357",name_en:"Hunan",center:"112.982279,28.19409",level:"province",districts:[],position:"left"},{citycode:[],adcode:"460000",name_cn:"\u6D77\u5357",name_en:"Hainan",center:"110.33119,20.031971",level:"province",districts:[]},{citycode:[],adcode:"320000",name_cn:"\u6C5F\u82CF",name_en:"Jiangsu",center:"118.767413,32.041544",level:"province",districts:[],position:"right"},{citycode:[],adcode:"630000",name_cn:"\u9752\u6D77",name_en:"Qinghai",center:"101.778916,36.623178",level:"province",districts:[],position:"left"},{citycode:[],adcode:"450000",name_cn:"\u5E7F\u897F",name_en:"Guangxi",center:"108.320004,22.82402",level:"province",districts:[]},{citycode:[],adcode:"640000",name_cn:"\u5B81\u590F",name_en:"Ningxia",center:"106.278179,38.46637",level:"province",districts:[],position:"bottom"},{citycode:[],adcode:"360000",name_cn:"\u6C5F\u897F",name_en:"Jiangxi",center:"115.892151,28.676493",level:"province",districts:[]},{citycode:[],adcode:"330000",name_cn:"\u6D59\u6C5F",name_en:"Zhejiang",center:"120.153576,30.287459",level:"province",districts:[],position:"bottom"},{citycode:[],adcode:"130000",name_cn:"\u6CB3\u5317",name_en:"Hebei",center:"114.502461,38.045474",level:"province",districts:[],position:"right"},{citycode:"1853",adcode:"820000",name_cn:"\u6FB3\u95E8",name_en:"Macau",center:"113.54909,22.198951",level:"province",districts:[],position:"bottom"},{citycode:"1886",adcode:"710000",name_cn:"\u53F0\u6E7E",name_en:"Taiwan",center:"121.509062,25.044332",level:"province",districts:[],position:"bottom"},{citycode:"1852",adcode:"810000",name_cn:"\u9999\u6E2F",name_en:"Hong Kong",center:"114.173355,22.320048",level:"province",districts:[],position:"right"},{citycode:[],adcode:"620000",name_cn:"\u7518\u8083",name_en:"Gansu",center:"103.823557,36.058039",level:"province",districts:[]},{citycode:[],adcode:"510000",name_cn:"\u56DB\u5DDD",name_en:"Sichuan",center:"104.065735,30.659462",level:"province",districts:[]},{citycode:[],adcode:"220000",name_cn:"\u5409\u6797",name_en:"Jilin",center:"125.3245,43.886841",level:"province",districts:[]},{citycode:"022",adcode:"120000",name_cn:"\u5929\u6D25",name_en:"Tianjin",center:"117.190182,39.125596",level:"province",districts:[]},{citycode:[],adcode:"530000",name_cn:"\u4E91\u5357",name_en:"Yunnan",center:"102.712251,25.040609",level:"province",districts:[]},{citycode:"010",adcode:"110000",name_cn:"\u5317\u4EAC",name_en:"Beijing",center:"116.405285,39.904989",level:"province",districts:[],position:"top"},{citycode:[],adcode:"140000",name_cn:"\u5C71\u897F",name_en:"Shanxi",center:"112.549248,37.857014",level:"province",districts:[]}],Sr=k(26869),Nt=function(e){return Object.prototype.toString.call(e)==="[object Object]"},Nr=function(e){var t=e.data,n=e.render,a=e.options;if(typeof n=="function")return n(t);var o=a!=null?a:{},l=o.columns,i=l===void 0?[]:l,c=o.more,u=c===void 0?{}:c,h=u.text,d=h===void 0?"\u8BE6\u60C5":h;return(0,r.jsxs)("div",{className:"tip-info-panel",children:[(0,r.jsxs)("div",{className:"panel-header flex",children:[(0,r.jsx)("h2",{className:"flex-1",children:t.title}),(0,r.jsx)("a",{className:"btn-more",href:t.url,target:"_blank",rel:"noreferrer",children:d})]}),(0,r.jsx)("div",{className:"panel-body",children:(0,r.jsx)("ul",{children:i.map(function(p){return(0,r.jsx)(g.Fragment,{children:(0,r.jsxs)("li",{className:"flex",children:[(0,r.jsx)("span",{className:"text-label",children:p.title}),(0,r.jsxs)("span",{className:"text-value",children:[t[p.dataIndex]," ",p==null?void 0:p.unit]})]})},p.dataIndex)})})})]})},br=function(e,t){var n=e.AMapOptions,a=n===void 0?{}:n,o=e.options,l=o===void 0?{}:o,i=e.strokeOptions,c=e.tileLayerOptions,u=e.districtLayerOptions,h=e.completed,d=e.className,p=d===void 0?"":d,b=e.style,w=b===void 0?{}:b,S=e.infoWindow,M=S===void 0?null:S,T=e.mapZoomShortcut,A=T===void 0?"mousewheel":T,O=e.autoLocateScaleLevels,P=O===void 0?!1:O,E=e.isAddProvinceNamesLayer,x=E===void 0?!0:E,D=e.language,W=D===void 0?"cn":D,$=(0,g.useRef)(null),B=(0,g.useRef)({AMap:null,map:null,chart:null}),C=(0,g.useRef)({province:[],china:[],loadLayer:""}),I=(0,g.useState)(!1),Y=he()(I,2),z=Y[0],K=Y[1],Z=Q()({endPoints:[],color:{start:"#F7A61B",end:"#01FE7D"},symbolSize:10,effectSymbol:"image://data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjVweCIgaGVpZ2h0PSIyNXB4IiB2aWV3Qm94PSIwIDAgMjUgMjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+57yW57uEIDEzNDwvdGl0bGU+CiAgICA8ZyBpZD0i6aG16Z2iLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLnvJbnu4QtMTM0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjIzNzAwMCwgMC40OTg5ODcpIj4KICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0Q4RDhEOCIgb3BhY2l0eT0iMCIgeD0iMCIgeT0iMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48L3JlY3Q+CiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSLot6/lvoQtNTblpIfku70tOCIgZmlsbD0iIzAxRkU3RCIgcG9pbnRzPSIxMi4zOTU5ODAzIDQgNyAxOS44MjYyMjI5IDExLjkzNzYxNDUgMTYuNDk1NzU5OCAxNy4zNDIyOTU1IDE5LjgyNjIyMjkiPjwvcG9seWdvbj4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},e.drawConnectLinesOptions),ce={cn:{mapZoomTips:"\u6309Ctrl + \u6EDA\u8F6E\u53EF\u7F29\u653E\u5730\u56FE"},en:{mapZoomTips:"Press Ctrl + scroll wheel to zoom the map"}},G=[].concat(Qe()(e.dataSource||[]),Qe()(((Z==null?void 0:Z.endPoints)||[]).filter(function(H){return H.lngLat}))),te=function(){var j=B.current,L=j.AMap,v=j.map;if(!(!L||!v)){for(var m=[],f=0;f<St.length;f++){var y={zIndex:1,opacity:1,text:{content:"",direction:"center",offset:[0,0],zooms:[3,5],style:{fontSize:13,fontWeight:"normal",fillColor:"#000",strokeColor:"#fff",strokeWidth:2}}},N=St[f],R=N[W==="en"?"name_en":"name_cn"];y.text.content=R,y.position=N.center.split(","),St[f].position&&(y.text.direction=St[f].position);var U=new L.LabelMarker(y);m.push(U)}var F=new L.LabelsLayer({zooms:[3,20],zIndex:99,collision:!0,allowCollision:!0,passMouse:!0});F.add(m),F.setMap(v)}},ne=function(){var H=it()(De()().mark(function j(L){var v,m,f,y,N=arguments;return De()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(v=N.length>1&&N[1]!==void 0?N[1]:!1,m=B.current,f=m.AMap,y=m.map,!(!f||!y||!L)){U.next=4;break}return U.abrupt("return",{polygon:null,district:null,auxPolygons:null});case 4:return U.next=6,new Promise(function(F,q){var V=new f.DistrictSearch({level:"province",extensions:"all",subdistrict:0,showbiz:!1});V.search(L,function(ae,ee){if(ee.info==="OK"){var _,X,ie,Le=[new f.LngLat(-360,90,!0),new f.LngLat(-360,-90,!0),new f.LngLat(360,-90,!0),new f.LngLat(360,90,!0)],de=ee.districtList[0].boundaries||[],ge=[Le].concat(Qe()(de)),ve=new f.Polygon(Q()({pathL:ge,strokeColor:"#1CBAA7",strokeWeight:(_=i==null?void 0:i.strokeWeight)!==null&&_!==void 0?_:1,fillColor:(X=i==null?void 0:i.fillColor)!==null&&X!==void 0?X:"#000",fillOpacity:(ie=i==null?void 0:i.fillOpacity)!==null&&ie!==void 0?ie:.8},i));ve.setPath(ge);var xe=[];if(v)for(var je=0;je<de.length;je++){var ke=new f.Polygon({pathL:de[je],strokeColor:"transparent",strokeWeight:0,fillOpacity:0});ke.setPath(de[je]),xe.push(ke)}F({polygon:ve,auxPolygons:xe,district:ee.districtList[0]})}})});case 6:return U.abrupt("return",U.sent);case 7:case"end":return U.stop()}},j)}));return function(L){return H.apply(this,arguments)}}(),re=function(){var j,L=B.current,v=L.AMap,m=L.map;!v||!m||(A==="ctrl+mousewheel"&&setTimeout(function(){!C.current.china.length&&ne("\u4E2D\u56FD").then(function(f){C.current.china=f.polygon}).catch(function(f){console.log(f)})}),!C.current.province.length&&ne((j=i==null?void 0:i.name)!==null&&j!==void 0?j:"\u4E2D\u56FD",!0).then(function(f){C.current.province=f.polygon,m.add(f.polygon),P&&Ce({polygon:f.auxPolygons})}).catch(function(f){console.log(f)}))},oe=function(j){var L=B.current,v=L.AMap,m=L.map;if(!(!v||!m)){var f=Q()({zIndex:10,SOC:"CHN",depth:1,styles:{"province-stroke-width":0,"city-stroke-width":0,"nation-stroke":"rgba(0,0,0,0)","coastline-stroke":"rgba(0,0,0,0)","province-stroke":"rgba(0,0,0,0)",fill:"rgba(0,0,0,0)"}},j||{}),y=new v.DistrictLayer.Country(f);y.setMap(m)}},we=function(){var j=B.current,L=j.AMap,v=j.map;!L||!v||v.add(new L.TileLayer.Satellite({opacity:1,detectRetina:!0}))},Ae=function(){var j=B.current,L=j.AMap,v=j.map;if(!(!L||!v)){for(var m={color:"red",animation:"DIFFUSION",size:8},f=[],y=Qe()(G),N=function(F){var q,V=Q()(Q()({},m),y[F]),ae=(q=B.current)===null||q===void 0?void 0:q.AMap,ee=new ae.Marker({position:V.lngLat,content:'<div style="--color:'.concat(V.color,";--animation:").concat(V.animation,";--size:").concat(V.size,'px" class="icon-marker"></div>'),extData:{id:V.id},anchor:"center",offset:new ae.Pixel(0,0),zIndex:999});if(y[F].address){var _,X,ie=new ae.InfoWindow({content:(_=y[F])===null||_===void 0?void 0:_.address,offset:new ae.Pixel(0,-15),autoMove:!0});!((X=y[F])===null||X===void 0)&&X.address&&ie.open(v,ee.getPosition())}ee.on("click",it()(De()().mark(function Le(){var de,ge,ve,xe,je,ke;return De()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(typeof((de=y[F])===null||de===void 0?void 0:de.onClick)=="function"&&((ge=(ve=y[F]).onClick)===null||ge===void 0||ge.call(ve,y[F])),!(Nt(M)&&y[F].hasInfoWindow!==!1)){Se.next=10;break}if(!((xe=y[F])!==null&&xe!==void 0&&xe.request)){Se.next=6;break}return Se.next=5,(je=y[F])===null||je===void 0?void 0:je.request(V);case 5:V.result=Se.sent;case 6:ke=new ae.InfoWindow({isCustom:!0,content:un.renderToStaticMarkup((0,r.jsx)(Nr,{data:V,render:M==null?void 0:M.render,options:M==null?void 0:M.options})),offset:new ae.Pixel(0,-15),autoMove:!0,closeWhenClickMap:!0}),ae.closeInfoWindow=function(){ke.close()},ke.open(v,ee.getPosition()),ke.on("close",function(){ae.closeInfoWindow=void 0});case 10:case"end":return Se.stop()}},Le)}))),f.push(ee)},R=0;R<y.length;R++)N(R);v.add(f)}},Me=function(){var j=B.current,L=j.AMap,v=j.map;!L||!v||(document.addEventListener("keydown",function(m){m.stopPropagation(),B.current.map.setStatus({scrollWheel:!0}),m.keyCode===17&&K(!0)}),document.addEventListener("keyup",function(m){m.stopPropagation(),B.current.map.setStatus({scrollWheel:!1}),m.keyCode===17&&K(!1)}))},Ce=function(j){var L=j.polygon,v=B.current,m=v.AMap,f=v.map;!m||!f||((i==null?void 0:i.name)!=="\u4E2D\u56FD"?(C.current.loadLayer="province",L&&(f.add(L),f.setFitView(L))):C.current.loadLayer="china",setTimeout(function(){var y=f.getZoom();f.on("zoomchange",function(){var N=f.getZoom();N<y?C.current.loadLayer!=="china"&&(C.current.loadLayer="china",f==null||f.remove(C.current.province),f==null||f.add(C.current.china)):C.current.loadLayer!=="province"&&(C.current.loadLayer="province",f==null||f.remove(C.current.china),f==null||f.add(C.current.province))})},5e3))},ue=function(j){var L,v,m=[];j.forEach(function(_){var X=_.from||[];X.forEach(function(ie){m.push({coords:[ie,_.lngLat]})})});var f=B.current,y=f.AMap,N=f.map,R=f.chart;if(!(!y||!N||!R)){var U=G.reduce(function(_,X){var ie=X.color;return _[ie]||(_[ie]=[]),_[ie].push(X),_},{}),F=[];for(var q in U){var V=U[q],ae={type:"scatter",coordinateSystem:"amap",symbolSize:15,itemStyle:{normal:{color:q}},data:V.map(function(_){return{value:_.lngLat}})};F.push(ae)}var ee=[{type:"lines",coordinateSystem:"amap",effect:{show:!0,period:6,trailLength:0,symbol:Z.effectSymbol,symbolSize:Z.symbolSize,color:"#01FE7D"},lineStyle:{normal:{width:1,opacity:.8,curveness:.2,color:new Cr.Z(0,0,1,0,[{offset:0,color:(Z==null||(L=Z.color)===null||L===void 0?void 0:L.start)||""},{offset:1,color:(Z==null||(v=Z.color)===null||v===void 0?void 0:v.end)||""}])}},data:m}].concat(F);console.log({series:ee}),B.current.chart.setOption({series:ee})}};(0,g.useImperativeHandle)(t,function(){return{loadMap:J,gdMap:B.current}});var J=function(){var H=it()(De()().mark(function j(){return De()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,new Promise(function(m,f){var y;if((y=B.current)!==null&&y!==void 0&&y.map){var N;(N=B.current)===null||N===void 0||(N=N.map)===null||N===void 0||N.destroy()}sn().load(Q()({key:"475c97e5ba9c55b5bbf684b116fe3c6e",version:"1.4.15",plugins:[]},l)).then(function(){var R=it()(De()().mark(function U(F){var q,V,ae,ee,_,X,ie;return De()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(window.AMap=F,q=document.getElementById("echarts-amap"),q){de.next=4;break}return de.abrupt("return");case 4:if(B.current.chart&&B.current.chart.dispose(),V=Lr.S1(q),ae={amap:Q()({lang:W,zoom:4,zooms:[2,10],center:[117.552366,41.997914],resizeEnable:!0,scrollWheel:!1},a),series:[]},V.setOption(ae),ee=V.getModel().getComponent("amap"),ee.setEChartsLayerInteractive(!1),_=ee.getAMap(),B.current={map:_,AMap:F,chart:V},x&&te(),X=[Nt(i)&&"AMap.DistrictSearch",Nt(c)&&"AMap.TileLayer",Nt(u)&&"AMap.DistrictLayer"].filter(Boolean),F.plugin(X,function(){X.includes("AMap.DistrictSearch")&&re(),X.includes("AMap.DistrictLayer")&&oe(u),X.includes("AMap.TileLayer")&&we()}),A==="ctrl+mousewheel"&&Me(),typeof h!="function"){de.next=22;break}return ie=new F.LabelsLayer({collision:!1,animation:!0}),_.add(ie),de.next=21,new Promise(function(ge){return setTimeout(ge,1500)});case 21:h(B.current);case 22:m(_);case 23:case"end":return de.stop()}},U)}));return function(U){return R.apply(this,arguments)}}())});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},j)}));return function(){return H.apply(this,arguments)}}();return(0,g.useEffect)(function(){J().then(function(){G!=null&&G.length&&(Ae(),ue(Z.endPoints))})},[]),(0,dn.Z)(function(){G!=null&&G.length&&(Ae(),ue(Z.endPoints))},[JSON.stringify(G)]),(0,g.useLayoutEffect)(function(){document.body.focus()},[]),(0,r.jsxs)("div",{ref:$,className:Sr({"qk-pointer-events-none":z},"qk-gao-de-map h-full w-full",p),style:w,children:[A==="ctrl+mousewheel"&&(0,r.jsx)("div",{className:"map-zoom-shortcut-tip shortcut-tip--simple",children:ce[W].mapZoomTips}),(0,r.jsx)("div",{id:"echarts-amap",className:" h-full w-full absolute"})]})},Ir=(0,g.forwardRef)(br),bt=[{citycode:[],adcode:"440000",name_cn:"\u5E7F\u4E1C",name_en:"Guangdong",center:"113.280637,23.125178",level:"province",districts:[]},{citycode:[],adcode:"410000",name_cn:"\u6CB3\u5357",name_en:"Henan",center:"113.665412,34.757975",level:"province",districts:[]},{citycode:[],adcode:"150000",name_cn:"\u5185\u8499\u53E4",name_en:"Inner Mongolia",center:"111.670801,40.818311",level:"province",districts:[],position:"top"},{citycode:[],adcode:"230000",name_cn:"\u9ED1\u9F99\u6C5F",name_en:"Heilongjiang",center:"126.642464,45.756967",level:"province",districts:[],position:"top"},{citycode:[],adcode:"650000",name_cn:"\u65B0\u7586",name_en:"Xinjiang",center:"87.617733,43.792818",level:"province",districts:[]},{citycode:[],adcode:"420000",name_cn:"\u6E56\u5317",name_en:"Hubei",center:"114.298572,30.584355",level:"province",districts:[]},{citycode:[],adcode:"210000",name_cn:"\u8FBD\u5B81",name_en:"Liaoning",center:"123.429096,41.796767",level:"province",districts:[]},{citycode:[],adcode:"370000",name_cn:"\u5C71\u4E1C",name_en:"Shandong",center:"117.000923,36.675807",level:"province",districts:[]},{citycode:[],adcode:"610000",name_cn:"\u9655\u897F",name_en:"Shaanxi",center:"108.948024,34.263161",level:"province",districts:[]},{citycode:"021",adcode:"310000",name_cn:"\u4E0A\u6D77",name_en:"Shanghai",center:"121.472644,31.231706",level:"province",districts:[],position:"right"},{citycode:[],adcode:"520000",name_cn:"\u8D35\u5DDE",name_en:"Guizhou",center:"106.713478,26.578343",level:"province",districts:[]},{citycode:"023",adcode:"500000",name_cn:"\u91CD\u5E86",name_en:"Chongqing",center:"106.504962,29.533155",level:"province",districts:[],position:"right"},{citycode:[],adcode:"540000",name_cn:"\u897F\u85CF",name_en:"Tibet",center:"91.132212,29.660361",level:"province",districts:[]},{citycode:[],adcode:"340000",name_cn:"\u5B89\u5FBD",name_en:"Anhui",center:"117.283042,31.86119",level:"province",districts:[],position:"top"},{citycode:[],adcode:"350000",name_cn:"\u798F\u5EFA",name_en:"Fujian",center:"119.306239,26.075302",level:"province",districts:[]},{citycode:[],adcode:"430000",name_cn:"\u6E56\u5357",name_en:"Hunan",center:"112.982279,28.19409",level:"province",districts:[],position:"left"},{citycode:[],adcode:"460000",name_cn:"\u6D77\u5357",name_en:"Hainan",center:"110.33119,20.031971",level:"province",districts:[]},{citycode:[],adcode:"320000",name_cn:"\u6C5F\u82CF",name_en:"Jiangsu",center:"118.767413,32.041544",level:"province",districts:[],position:"right"},{citycode:[],adcode:"630000",name_cn:"\u9752\u6D77",name_en:"Qinghai",center:"101.778916,36.623178",level:"province",districts:[],position:"left"},{citycode:[],adcode:"450000",name_cn:"\u5E7F\u897F",name_en:"Guangxi",center:"108.320004,22.82402",level:"province",districts:[]},{citycode:[],adcode:"640000",name_cn:"\u5B81\u590F",name_en:"Ningxia",center:"106.278179,38.46637",level:"province",districts:[],position:"bottom"},{citycode:[],adcode:"360000",name_cn:"\u6C5F\u897F",name_en:"Jiangxi",center:"115.892151,28.676493",level:"province",districts:[]},{citycode:[],adcode:"330000",name_cn:"\u6D59\u6C5F",name_en:"Zhejiang",center:"120.153576,30.287459",level:"province",districts:[],position:"bottom"},{citycode:[],adcode:"130000",name_cn:"\u6CB3\u5317",name_en:"Hebei",center:"114.502461,38.045474",level:"province",districts:[],position:"right"},{citycode:"1853",adcode:"820000",name_cn:"\u6FB3\u95E8",name_en:"Macau",center:"113.54909,22.198951",level:"province",districts:[],position:"bottom"},{citycode:"1886",adcode:"710000",name_cn:"\u53F0\u6E7E",name_en:"Taiwan",center:"121.509062,25.044332",level:"province",districts:[],position:"bottom"},{citycode:"1852",adcode:"810000",name_cn:"\u9999\u6E2F",name_en:"Hong Kong",center:"114.173355,22.320048",level:"province",districts:[],position:"right"},{citycode:[],adcode:"620000",name_cn:"\u7518\u8083",name_en:"Gansu",center:"103.823557,36.058039",level:"province",districts:[]},{citycode:[],adcode:"510000",name_cn:"\u56DB\u5DDD",name_en:"Sichuan",center:"104.065735,30.659462",level:"province",districts:[]},{citycode:[],adcode:"220000",name_cn:"\u5409\u6797",name_en:"Jilin",center:"125.3245,43.886841",level:"province",districts:[]},{citycode:"022",adcode:"120000",name_cn:"\u5929\u6D25",name_en:"Tianjin",center:"117.190182,39.125596",level:"province",districts:[]},{citycode:[],adcode:"530000",name_cn:"\u4E91\u5357",name_en:"Yunnan",center:"102.712251,25.040609",level:"province",districts:[]},{citycode:"010",adcode:"110000",name_cn:"\u5317\u4EAC",name_en:"Beijing",center:"116.405285,39.904989",level:"province",districts:[],position:"top"},{citycode:[],adcode:"140000",name_cn:"\u5C71\u897F",name_en:"Shanxi",center:"112.549248,37.857014",level:"province",districts:[]}],Er=k(26869),It=function(e){return Object.prototype.toString.call(e)==="[object Object]"},Dr=function(e){var t=e.data,n=e.render,a=e.options;if(typeof n=="function")return n(t);var o=a!=null?a:{},l=o.columns,i=l===void 0?[]:l,c=o.more,u=c===void 0?{}:c,h=u.text,d=h===void 0?"\u8BE6\u60C5":h;return(0,r.jsxs)("div",{className:"tip-info-panel",children:[(0,r.jsxs)("div",{className:"panel-header flex",children:[(0,r.jsx)("h2",{className:"flex-1",children:t.title}),(0,r.jsx)("a",{className:"btn-more",href:t.url,target:"_blank",rel:"noreferrer",children:d})]}),(0,r.jsx)("div",{className:"panel-body",children:(0,r.jsx)("ul",{children:i.map(function(p){return(0,r.jsx)(g.Fragment,{children:(0,r.jsxs)("li",{className:"flex",children:[(0,r.jsx)("span",{className:"text-label",children:p.title}),(0,r.jsxs)("span",{className:"text-value",children:[t[p.dataIndex]," ",p==null?void 0:p.unit]})]})},p.dataIndex)})})})]})},kr=function(e){var t=e.AMapOptions,n=t===void 0?{}:t,a=e.options,o=a===void 0?{}:a,l=e.dataSource,i=l===void 0?[]:l,c=e.strokeOptions,u=e.tileLayerOptions,h=e.districtLayerOptions,d=e.completed,p=e.className,b=p===void 0?"":p,w=e.style,S=w===void 0?{}:w,M=e.infoWindow,T=M===void 0?null:M,A=e.mapZoomShortcut,O=A===void 0?"mousewheel":A,P=e.autoLocateScaleLevels,E=P===void 0?!1:P,x=e.isAddProvinceNamesLayer,D=x===void 0?!0:x,W=e.language,$=W===void 0?"cn":W,B=(0,g.useRef)(null),C=(0,g.useRef)({AMap:null,map:null}),I=(0,g.useRef)({province:[],china:[],loadLayer:""}),Y=(0,g.useState)(!1),z=he()(Y,2),K=z[0],Z=z[1],ce={cn:{mapZoomTips:"\u6309Ctrl + \u6EDA\u8F6E\u53EF\u7F29\u653E\u5730\u56FE"},en:{mapZoomTips:"Press Ctrl + scroll wheel to zoom the map"}},G=function(){var J=C.current,H=J.AMap,j=J.map;if(!(!H||!j)){for(var L=[],v=0;v<bt.length;v++){var m={zIndex:1,opacity:1,text:{content:"",direction:"center",offset:[0,0],zooms:[3,4],style:{fontSize:13,fontWeight:"normal",fillColor:"#000",strokeColor:"#fff",strokeWidth:2}}},f=bt[v],y=f[$==="en"?"name_en":"name_cn"];m.text.content=y,m.position=f.center.split(","),bt[v].position&&(m.text.direction=bt[v].position);var N=new H.LabelMarker(m);L.push(N)}var R=new H.LabelsLayer({zooms:[3,20],zIndex:99,collision:!0,allowCollision:!0,passMouse:!0});R.add(L),R.setMap(j)}},te=function(){var ue=it()(De()().mark(function J(H){var j,L,v,m,f=arguments;return De()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(j=f.length>1&&f[1]!==void 0?f[1]:!1,L=C.current,v=L.AMap,m=L.map,!(!v||!m||!H)){N.next=4;break}return N.abrupt("return",{polygon:null,district:null,auxPolygons:null});case 4:return N.next=6,new Promise(function(R,U){var F=new v.DistrictSearch({level:"province",extensions:"all",subdistrict:0,showbiz:!1});F.search(H,function(q,V){if(V.info==="OK"){var ae,ee,_,X=[new v.LngLat(-360,90,!0),new v.LngLat(-360,-90,!0),new v.LngLat(360,-90,!0),new v.LngLat(360,90,!0)],ie=V.districtList[0].boundaries||[],Le=[X].concat(Qe()(ie)),de=new v.Polygon(Q()({pathL:Le,strokeColor:"#1CBAA7",strokeWeight:(ae=c==null?void 0:c.strokeWeight)!==null&&ae!==void 0?ae:1,fillColor:(ee=c==null?void 0:c.fillColor)!==null&&ee!==void 0?ee:"#000",fillOpacity:(_=c==null?void 0:c.fillOpacity)!==null&&_!==void 0?_:.8},c));de.setPath(Le);var ge=[];if(j)for(var ve=0;ve<ie.length;ve++){var xe=new v.Polygon({pathL:ie[ve],strokeColor:"transparent",strokeWeight:0,fillOpacity:0});xe.setPath(ie[ve]),ge.push(xe)}R({polygon:de,auxPolygons:ge,district:V.districtList[0]})}})});case 6:return N.abrupt("return",N.sent);case 7:case"end":return N.stop()}},J)}));return function(H){return ue.apply(this,arguments)}}(),ne=function(){var J,H=C.current,j=H.AMap,L=H.map;!j||!L||(O==="ctrl+mousewheel"&&setTimeout(function(){!I.current.china.length&&te("\u4E2D\u56FD").then(function(v){I.current.china=v.polygon}).catch(function(v){console.log(v)})}),!I.current.province.length&&te((J=c==null?void 0:c.name)!==null&&J!==void 0?J:"\u4E2D\u56FD",!0).then(function(v){I.current.province=v.polygon,L.add(v.polygon),E&&Me({polygon:v.auxPolygons})}).catch(function(v){console.log(v)}))},re=function(){var J=C.current,H=J.AMap,j=J.map;if(!(!H||!j)){var L=new H.DistrictLayer.Country({zIndex:10,SOC:"CHN",depth:1,styles:{"stroke-width":2,"nation-stroke":"#1CBAA7","coastline-stroke":"#1CBAA7","province-stroke":"#1CBAA7",fill:function(m){return"rgba(255,255,255,0)"}}});j==null||j.add(L)}},oe=function(){var J=C.current,H=J.AMap,j=J.map;!H||!j||j.add(new H.TileLayer.Satellite({opacity:1,detectRetina:!0}))},we=function(){var J=C.current,H=J.AMap,j=J.map;if(!(!H||!j)){for(var L={color:"red",animation:"DIFFUSION",size:8},v=[],m=Qe()(i),f=function(R){var U,F=Q()(Q()({},L),m[R]),q=(U=C.current)===null||U===void 0?void 0:U.AMap,V=new q.Marker({position:F.lngLat,content:'<div style="--color:'.concat(F.color,";--animation:").concat(F.animation,";--size:").concat(F.size,'px" class="icon-marker"></div>'),extData:{id:F.id},anchor:"center",offset:new q.Pixel(0,0),zIndex:999});if(m[R].address){var ae,ee,_=new q.InfoWindow({content:(ae=m[R])===null||ae===void 0?void 0:ae.address,offset:new q.Pixel(0,-10),autoMove:!0});!((ee=m[R])===null||ee===void 0)&&ee.address&&_.open(j,V.getPosition())}V.on("click",function(){if(It(T)&&m[R].hasInfoWindow!==!1){var X=new q.InfoWindow({isCustom:!0,content:un.renderToStaticMarkup((0,r.jsx)(Dr,{data:F,render:T==null?void 0:T.render,options:T==null?void 0:T.options})),offset:new q.Pixel(5,-10),autoMove:!0,closeWhenClickMap:!0});X.open(j,V.getPosition())}}),v.push(V)},y=0;y<m.length;y++)f(y);j.add(v)}},Ae=function(){var J=C.current,H=J.AMap,j=J.map;!H||!j||(document.addEventListener("keydown",function(L){L.stopPropagation(),C.current.map.setStatus({scrollWheel:!0}),L.keyCode===17&&Z(!0)}),document.addEventListener("keyup",function(L){L.stopPropagation(),C.current.map.setStatus({scrollWheel:!1}),L.keyCode===17&&Z(!1)}))},Me=function(J){var H=J.polygon,j=C.current,L=j.AMap,v=j.map;!L||!v||((c==null?void 0:c.name)!=="\u4E2D\u56FD"?(I.current.loadLayer="province",H&&(v.add(H),v.setFitView(H))):I.current.loadLayer="china",setTimeout(function(){var m=v.getZoom();console.log({realZoom:m,loadLayer:I.current.loadLayer}),v.on("zoomchange",function(){var f=v.getZoom();console.log({zoomLevel:f,loadLayer:I.current.loadLayer}),f<m?I.current.loadLayer!=="china"&&(I.current.loadLayer="china",v==null||v.remove(I.current.province),v==null||v.add(I.current.china)):I.current.loadLayer!=="province"&&(I.current.loadLayer="province",v==null||v.remove(I.current.china),v==null||v.add(I.current.province))})},5e3))},Ce=function(){var ue=it()(De()().mark(function J(){return De()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,new Promise(function(L,v){sn().load(Q()({key:"475c97e5ba9c55b5bbf684b116fe3c6e",version:"1.4.15",plugins:[]},o)).then(function(m){var f=new m.Map("qk-gao-de-map",Q()({lang:$,zoom:4,zooms:[2,10],center:[117.552366,41.997914],resizeEnable:!0,scrollWheel:!1},n));C.current={map:f,AMap:m},D&&G();var y=[It(c)&&"AMap.DistrictSearch",It(u)&&"AMap.TileLayer",It(h)&&"AMap.DistrictLayer"].filter(Boolean);if(m.plugin(y,function(){y.includes("AMap.DistrictSearch")&&ne(),y.includes("AMap.DistrictLayer")&&re(),y.includes("AMap.TileLayer")&&oe(),i!=null&&i.length&&we()}),O==="ctrl+mousewheel"&&Ae(),typeof d=="function"){var N=new m.LabelsLayer({collision:!1,animation:!0});f.add(N),d(C.current),L(f)}})});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},J)}));return function(){return ue.apply(this,arguments)}}();return(0,g.useEffect)(function(){Ce()},[JSON.stringify(i)]),(0,g.useLayoutEffect)(function(){document.body.focus()},[]),(0,r.jsxs)("div",{ref:B,className:Er({"qk-pointer-events-none":K},"qk-gao-de-map h-full w-full",b),style:S,children:[O==="ctrl+mousewheel"&&(0,r.jsx)("div",{className:"map-zoom-shortcut-tip shortcut-tip--simple",children:ce[$].mapZoomTips}),(0,r.jsx)("div",{id:"qk-gao-de-map",className:" h-full w-full absolute"})]})},Qr=kr,Tr=k(63027),Rr=k.n(Tr),vn,Wt=function(s){return s._="sub",s["^"]="sup",s["\\underline"]="underline",s["\\overline"]="overline",s["\\sum"]="sum",s}(Wt||{}),Pr=function(e){var t=e.content,n=(0,g.useRef)(null),a=(0,g.useState)(),o=he()(a,2),l=o[0],i=o[1],c=Object.keys(Wt).map(function(d){return"\\"+d+"\\{|"}).join("")+"\\}";(0,g.useLayoutEffect)(function(){var d,p,b=window.getComputedStyle((d=n.current)!==null&&d!==void 0?d:document.body).getPropertyValue("font-size"),w="12px",S=(p=n.current)===null||p===void 0?void 0:p.querySelectorAll("sum");S!=null&&S.length&&S.forEach(function(M){var T=M==null?void 0:M.childNodes,A=he()(T,2),O=A[0],P=A[1],E=Math.max.apply(Math,Qe()([O.innerHTML,P.innerHTML].map(function(x){return x.length})));w=window.getComputedStyle(O!=null?O:document.body).fontSize,M.setAttribute("content",new Array(Math.ceil(E)).fill(1).join(""))}),i({"--font-size":"".concat(b),"--min-font-size":"".concat(w)})},[]);var u=String.raw(vn||(vn=Rr()(["",""])),t),h=[];return u=u.replace(new RegExp(c,"g"),function(d){var p="";if(!h.length&&d==="}")return d;if(d=="}")p="</".concat(h.pop(),">");else{var b=d.replace(/\{/g,""),w=Wt[b];h.push(w),p="<".concat(w,">")}return p}),(0,r.jsx)("span",{className:"qk-math-formula",style:l,ref:n,dangerouslySetInnerHTML:{__html:u}})},Or=Pr,Br=k(2070),fn=k(57889),zr="data:image/png;base64,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",Ht=function(e){var t=(0,g.useState)(!1),n=he()(t,2),a=n[0],o=n[1],l=e.src,i=e.onCancel;return(0,g.useEffect)(function(){l&&o(!0)},[l]),(0,r.jsx)(Br.Z,{src:a?l:zr,onError:function(){fn.ZP.error("\u56FE\u7247\u52A0\u8F7D\u5931\u8D25")},placeholder:"\u52A0\u8F7D\u4E2D...",style:{display:"none"},preview:{visible:a,src:l,onVisibleChange:function(u){u||(o(!1),setTimeout(function(){i==null||i()},200))}}})},Fr=Ht,Wr=function(e){var t=document.createElement("div");ht.render((0,r.jsx)(Ht,Q()(Q()({},e),{},{onCancel:function(){ht.unmountComponentAtNode(t),document.body.removeChild(t)}})),t),document.body.append(t)};Ht.Create=Wr;var Hr=k(23446),Zr=function(e){return(0,r.jsx)(Hr.Z,Q()({},e))},Yr=Zr,Gr=k(59454),Ur=function(e){return(0,r.jsx)(Gr.Y,Q()({},e))},Kr=Ur,Zt=function(e){var t=e.children;return t};Zt.Pc=function(s){var e=s.children,t=window.isMobile;if(!t)return e},Zt.Mobile=function(s){var e=s.children,t=window.isMobile;if(t)return e};var Jr=Zt,hn=k(65103),mn=function(e){return(0,r.jsx)(hn.vY,Q()({},e))};mn.Item=hn.vY.Item;var $r=mn,qr=k(42525),Yt=k.n(qr),Et=k(95711),Xr=k(60183),pn=k.n(Xr),Vr=function(e,t,n){var a={};t.forEach(function(l){a[l]=[],e.forEach(function(i){i[n]===l&&a[l].push(i)})});var o=[];return Object.keys(a).forEach(function(l){o.push(pn()(pn()({},n,l),"list",a[l]))}),o},_r=function(e,t){if(!e.length)return[];if(!t)return e;var n=new Set;return e.forEach(function(a){n.add(a[t])}),Vr(e,Qe()(n),t)},gn=function(e,t){var n=t==null?void 0:t.filter(function(i){return i.merge==="col"}),a=e;n.map(function(i){var c=i.mergeBy?i.mergeBy:i.dataIndex,u=_r(e,c);return u.forEach(function(h){var d;h==null||(d=h.list)===null||d===void 0||d.forEach(function(p,b){p["rowSpan_".concat(c)]=b===0?h.list.length:0}),a.concat(h==null?void 0:h.list)}),u});var o=[],l=0;return t.forEach(function(i){var c;Object.keys(o).length||(o[l]=[]),((c=i.merge)!==null&&c!==void 0?c:[]).includes("row")?o[l].push(i.dataIndex):(l++,o[l]=[])}),o=o.filter(function(i){return i.length>1}),o.length&&a.forEach(function(i){o.forEach(function(c){var u=c.map(function(d){return i[d]}).filter(Boolean),h=new Set(u).size;h<=1&&c.forEach(function(d,p){p===0?i["colSpan_"+d]=c.length:i["colSpan_"+d]=0})})}),a},ea=function(e){return e==null||e.forEach(function(t){t.valueType==="index"&&(t.width=50),e==null||e.forEach(function(n){var a;n.valueType=="index"&&(n.width=50),((a=n.merge)!==null&&a!==void 0?a:[]).length&&(n.onCell=function(o){var l,i,c=n.mergeBy?n.mergeBy:n.dataIndex;return{rowSpan:(l=o["rowSpan_".concat(c)])!==null&&l!==void 0?l:1,colSpan:(i=o["colSpan_".concat(n.dataIndex)])!==null&&i!==void 0?i:1}})})}),e},ta=["ellipsis"],Dt=function(e){var t,n,a=(0,g.useRef)(!0),o=e.ellipsis,l=o===void 0?!0:o,i=Yt()(e,ta),c=i.columns,u=c===void 0?[]:c,h=i.actionRef?i.actionRef:(0,g.useRef)();if(l){var d=0;u.forEach(function(w){var S;if(!w.width){var M,T,A=(M=String((T=w.title)!==null&&T!==void 0?T:""))===null||M===void 0?void 0:M.length;w.width=A?A*30:50}w.ellipsis===void 0&&(w.ellipsis=!0),d+=(S=Number(w.width))!==null&&S!==void 0?S:50,w.title==="\u64CD\u4F5C"&&(w.fixed="right",w.ellipsis=void 0)}),i.scroll={x:d}}"pagination"in i||(i.pagination={defaultPageSize:10,showSizeChanger:!0}),i.options===void 0&&(i.options=!1),i.postData=function(w){return gn(w,u)},(t=i.dataSource)!==null&&t!==void 0&&t.length&&(i.dataSource=gn(i.dataSource,u)),u=ea(u);var p=function(){var S={};try{S=JSON.parse(history.getUrlParams().searchParams)}catch(M){S={}}return S},b=function(S){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,T=S;M&&(T=Q()(Q()({},p()),S)),En({searchParams:JSON.stringify(T)},M)};return i!=null&&i.search&&i!==null&&i!==void 0&&(n=i.search)!==null&&n!==void 0&&n.storeQueryParams&&(i.search.optionRender=function(w,S){var M=h.current||{},T=M.setPageInfo,A=M.pageInfo,O=A===void 0?{}:A,P=w.resetText,E=w.searchText,x=S.form,D=p(),W=function(){var I,Y=((I=h.current)===null||I===void 0?void 0:I.pageInfo)||{},z=Y.current;return{current:z}},$=function(){var I=x==null?void 0:x.getFieldsValue(),Y={};for(var z in I)I[z]!==void 0&&(Y[z]=I[z]);return Y};if(a.current){var B;x==null||x.setFieldsValue(D),a.current=!1,T==null||T(Q()(Q()({},O),{},{current:Number((B=D==null?void 0:D.current)!==null&&B!==void 0?B:1)}))}return[(0,r.jsx)(ze.ZP,{onClick:function(){x==null||x.resetFields(),b(W(),!1),x==null||x.submit()},children:P},"reset"),(0,r.jsx)(ze.ZP,{type:"primary",onClick:function(){x==null||x.submit(),b(Q()(Q()({},$()),W()),!1)},children:E},"search")]},i.pagination=Q()({defaultPageSize:10,showQuickJumper:!0,size:"default",onChange:function(S){b({current:S},!0)}},i.pagination)),(0,r.jsx)(Et.Z,Q()(Q()({actionRef:h},i),{},{columns:u}))},na=Dt;Dt.Summary=Et.Z.Summary,Dt.Summary.Row=Et.Z.Summary.Row,Dt.Summary.Cell=Et.Z.Summary.Cell;var ra=k(6112),aa="data:image/png;base64,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",ia=k(91158),yn=k(21464),oa=k(24350),la=k.n(oa),Gt=function(e){var t=e.content,n=t===void 0?"":t,a=e.width,o=a===void 0?168:a,l=e.edit,i=l===void 0?!1:l,c=e.margin,u=c===void 0?10:c,h=e.value,d=h===void 0?"":h,p=e.title,b=p===void 0?"":p,w=e.download,S=w===void 0?null:w,M=e.screenshot,T=M===void 0?!1:M,A=e.onChange,O=A===void 0?function(G){return 0}:A,P=e.success,E=P===void 0?function(G){return 0}:P,x=e.finish,D=x===void 0?function(G){return 0}:x,W=e.titleLen,$=W===void 0?20:W,B=(0,g.useRef)(null),C=(0,g.useState)({edit:!1}),I=he()(C,2),Y=I[0],z=I[1],K=(0,g.useRef)(null),Z=Math.round(o/14),ce=function(){return new Promise(function(te,ne){la()(B.current||document.body,{ignoreElements:function(oe){return oe.classList.value.indexOf("icon-edit")!==-1}}).then(function(re){te(re.toDataURL("image/png"))}).catch(function(){ne()})})};return(0,g.useLayoutEffect)(function(){T&&typeof E=="function"&&setTimeout(function(){ce().then(function(G){E(G)})},1e3)}),n?(0,r.jsxs)("div",{className:"qk-qr-code",style:{width:o-u+"px","--fontSize":Z+"px","--margin":u+"px"},children:[(0,r.jsxs)("div",{className:"qk-qr-code-wrap",ref:B,children:[(0,r.jsx)(ra.ZP,{value:n,size:o-u,style:{padding:u+"px",background:"#fff",borderRadius:"8px"}}),(0,r.jsxs)("p",{className:Ye()("qk-qr-code__title",{"qk-qr-code__title-margin":d||b}),children:[Y.edit&&(0,r.jsx)("textarea",{ref:K,value:d||b,maxLength:$,onChange:function(te){var ne=te.target.value;O==null||O(ne)},onBlur:function(){typeof D=="function"&&D(d),z((0,yn.Uy)(function(te){te.edit=!1}))}}),!Y.edit&&(0,r.jsx)("span",{children:d||b}),i&&(0,r.jsx)("i",{onClick:function(){z((0,yn.Uy)(function(te){te.edit=!0})),setTimeout(function(){var te,ne,re,oe=((te=K.current)===null||te===void 0?void 0:te.value.length)||0;(ne=K.current)===null||ne===void 0||ne.focus(),(re=K.current)===null||re===void 0||re.setSelectionRange(oe,oe)})},className:"icon-edit"})]})]}),S&&(0,r.jsx)("div",{className:"btn-group",children:(0,r.jsx)(ze.ZP,{type:"primary",block:!0,className:"btn-download cursor-pointer",onClick:S,disabled:!1,icon:(0,r.jsx)(ia.Z,{}),children:"\u4E0B\u8F7D\u4E8C\u7EF4\u7801"})})]}):(0,r.jsx)("div",{className:"qk-qr-code",style:{width:o+"px"},children:(0,r.jsx)("img",{src:aa,alt:""})})},ca=function(e){var t=document.createElement("div");return ht.render((0,r.jsx)(Gt,Q()({screenshot:!0},e)),t),document.body.appendChild(t),{destroy:function(){ht.unmountComponentAtNode(t),document.body.removeChild(t)}}},sa=Gt;Gt.screenshot=ca;var mt=k(26869),da=function(e){var t=e.filter(function(n){return n.type==="summaryTable"});return t.length?t.map(function(n){return{name:n.name,equipment:n.equipment,type:n.type}}):t},ua=function s(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.forEach(function(n){n.type==="wattHourMeter"&&t.push({name:n.name,equipment:n.equipment,type:n.type}),n.children&&s(n.children,t)}),t},An=function(e){for(var t=e.data,n=e.groupNumber,a=n===void 0?4:n,o=t.length,l=o>a?Math.ceil(o/a):a,i=[],c=0;c<o;c+=l)i.push({name:"\u865A\u62DF\u7535\u8868",equipment:"wattHourMeter",type:"wattHourMeter",children:t.slice(c,c+l)});return i},va=function s(e){var t=e.data,n=e.type,a=e.result,o=a===void 0?[]:a,l=an()(t),i;try{for(l.s();!(i=l.n()).done;){var c,u=i.value;if(u.type==="region"&&n===void 0){o=An({data:t});continue}if(u.type==="region"&&n==="summaryTable"){o=An({data:t});continue}if(u.type==="wattHourMeter"&&n==="summaryTable"){o=t;continue}if(u.type==="wattHourMeter"&&n===void 0){o=t;continue}(c=u.children)!==null&&c!==void 0&&c.length&&!o.length&&(o=s({data:u.children,type:u.type}))}}catch(h){l.e(h)}finally{l.f()}return o},xn=function(e){var t=e.type,n=e.name,a=e.className,o=a===void 0?"":a,l=["summaryTable","wattHourMeter"].includes(t);return(0,r.jsxs)("div",{className:mt({"watt-hour-meter-comp":l},"flex",o),children:[(0,r.jsx)("div",{className:"equipment__icon flex justify-center items-center",children:(0,r.jsx)("i",{className:mt("icon","icon-"+t)})}),(0,r.jsx)("div",{className:"equipment__name flex-1 flex justify-center items-center",children:n})]})},fa=function(e){var t,n=e.data,a=n.name,o=(t=n==null?void 0:n.children)!==null&&t!==void 0?t:[];return(0,r.jsxs)("div",{className:"regional-equipment",children:[(0,r.jsx)("div",{className:"regional-equipment__name",children:(0,r.jsx)("span",{children:a})}),(0,r.jsx)("div",{className:"regional-equipment-eq-row flex flex-row  justify-center",children:o.map(function(l,i){var c;return(0,r.jsxs)("div",{className:"regional-equipment-asse",children:[(0,r.jsxs)("div",{className:"regional-equipment-eq",children:[(0,r.jsx)("div",{className:mt("eq__icon","icon-"+l.equipment)}),(0,r.jsx)("div",{className:"eq__name",children:l.name})]}),(0,r.jsxs)("div",{className:"regional-equipment-number",children:["*",(c=l==null?void 0:l.number)!==null&&c!==void 0?c:0]})]},"r-"+i)})})]})},ha=function(e){var t=e.dataSource,n=e.options,a=n===void 0?{}:n,o=a.language,l=o===void 0?"cn":o,i=a.height,c=i===void 0?"100%":i,u=(0,g.useState)([]),h=he()(u,2),d=h[0],p=h[1],b=(0,g.useState)([]),w=he()(b,2),S=w[0],M=w[1],T=(0,g.useState)([]),A=he()(T,2),O=A[0],P=A[1],E={cn:{wattHourMeter:"\u7535\u8868",region:"\u5149\u4F0F\u533A\u57DF"},en:{wattHourMeter:"Electric Meter",region:"Region of Solar"}};return(0,g.useEffect)(function(){p(da(t)),M(ua(t)),P(va({data:t}))},[JSON.stringify(t)]),(0,r.jsx)("div",{className:"qk-sketch-map",style:{maxHeight:c},children:(0,r.jsx)("div",{className:mt("pv-diagram",{"not-project-summary":!d.length,"has-project-summary":d.length,"not-sub-meter":!S.length,"not-regional-equipment":!O.length,"sub-meter-number-1":S.length===1}),children:(0,r.jsxs)("div",{className:"pv-diagram-warp flex flex-row",children:[(0,r.jsx)("div",{className:"watt-hour-meter flex justify-center",children:(0,r.jsxs)("div",{className:"watt-hour-meter-wrap flex flex-row",children:[(0,r.jsx)("div",{className:"watt-hour-meter-wrap__name",children:E[l].wattHourMeter}),(0,r.jsx)("div",{className:"project-pummary flex items-center",children:d.map(function(x,D){return x.type&&(0,r.jsx)(xn,{type:x.type,name:x.name},"v-"+D)})}),(0,r.jsxs)("div",{className:"whm-sm-connection",children:[(0,r.jsx)("div",{className:"whm-sm-connection__line-top"}),(0,r.jsx)("div",{className:"whm-sm-connection__line-bottom"}),(0,r.jsx)("div",{className:"whm-sm-connection__line-center"})]}),(0,r.jsx)("div",{className:"sub-meter flex justify-center flex-col",children:S.map(function(x,D){return(0,r.jsxs)("div",{className:"sub-meter-wrap",children:[x.type&&(0,r.jsx)(xn,{className:mt({"watt-hour-meter-comp__line":D!==0&&D!==S.length-1}),type:x.type,name:x.name}),D<S.length-1&&(0,r.jsx)("div",{className:"seize-seat"})]},"g-"+D)})})]})}),(0,r.jsx)("div",{className:"area flex-1",children:(0,r.jsxs)("div",{className:"area-wrap",children:[(0,r.jsx)("div",{className:"area-wrap__name",children:E[l].region}),O.map(function(x,D){var W;return(0,r.jsx)("div",{className:"area-equipment-row flex flex-row",children:(W=x.children)===null||W===void 0?void 0:W.map(function($,B){return(0,r.jsx)(fa,{data:$},"z-"+B)})},"k-"+D)})]})})]})})})},ma=ha,pa=function(e){var t=new Date(Math.min.apply(Math,Qe()(e.map(function(a){return new Date(a.start).getTime()})))),n=new Date(Math.max.apply(Math,Qe()(e.map(function(a){return new Date(a.end).getTime()}))));return{minDate:new Date(t),maxDate:new Date(n)}},Ut=function(e,t){for(var n=[],a=new Date(e),o=new Date(t);a<=o;)n.push(a.toISOString().slice(0,10)),a.setDate(a.getDate()+1);return n};function ga(s){var e=s.map(function(a){var o=a.columns.reduce(function(l,i){return l+Number(i==null?void 0:i.value)},0);return Q()(Q()({},a),{},{total:o})}),t=e.sort(function(a,o){return o.total-a.total}),n=t.reduce(function(a,o){var l=o.total.toString();return a[l]||(a[l]=[]),a[l].push(o),a},{});return n}function wn(s,e){var t=Q()({},s);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=e[n],o=t[n];Je()(a)!=="object"?t[n]=a:(Je()(o)!=="object"&&(t[n]=Q()({},o)),t[n]=wn(o,a))}return t}var ya=function(e){var t,n,a,o,l,i,c,u,h,d=e.options,p=d===void 0?{}:d,b=e.data,w=(0,g.useRef)(null),S=(0,g.useRef)(null),M={margin:{left:0,top:20,right:50,bottom:50},yAxios:{width:50},strip:{height:24,margin:20},background:"transparent",xAxios:{nameRender:null}};p=wn(M,p);var T=(t=(n=p)===null||n===void 0?void 0:n.height)!==null&&t!==void 0?t:700,A=(a=p.tickLineWidth)!==null&&a!==void 0?a:65,O=(o=p.yAxios)!==null&&o!==void 0?o:{},P=O.width,E=P===void 0?50:P,x=(l=p.xAxios)!==null&&l!==void 0?l:{},D=x.nameRender,W=(i=(c=p.strip)===null||c===void 0?void 0:c.margin)!==null&&i!==void 0?i:0,$=(u=(h=p.strip)===null||h===void 0?void 0:h.margin)!==null&&u!==void 0?u:0,B=p.background,C=0,I=0,Y=0,z=0;if(typeof p.margin=="number"){var K;C=(K=p.margin)!==null&&K!==void 0?K:0,I=p.margin,Y=p.margin,z=p.margin}else if(Je()(p.margin)==="object"){var Z,ce,G,te,ne,re,oe,we;C=(Z=(ce=p)===null||ce===void 0||(ce=ce.margin)===null||ce===void 0?void 0:ce.left)!==null&&Z!==void 0?Z:0,I=(G=(te=p.margin)===null||te===void 0?void 0:te.top)!==null&&G!==void 0?G:0,Y=(ne=(re=p)===null||re===void 0||(re=re.margin)===null||re===void 0?void 0:re.right)!==null&&ne!==void 0?ne:0,z=(oe=(we=p.margin)===null||we===void 0?void 0:we.bottom)!==null&&oe!==void 0?oe:0}var Ae=ga(b);T||(T=Object.keys(Ae).length*W+b.length*W+z+I+50);var Me=function(v){return new le.fabric.Line(v,{stroke:"#E6E6E6",selectable:!1,hoverCursor:"normal"})},Ce=function(v){return new le.fabric.Line(v,{stroke:"#CCD6EB",strokeWidth:1,selectable:!1,hoverCursor:"normal"})},ue=function(v,m,f){return new le.fabric.Text(v,{left:m,top:f,fontSize:12,fontFamily:"SourceHanSansCN",selectable:!1,hoverCursor:"normal",fill:"#666666",angle:-20})},J=function(v){for(var m=v.dates,f=v.height,y=v.oneDayXaxiosWidth,N=[],R=0;R<m.length;R++){var U=C+E+R*A+A,F=I,q=U,V=f-I-z,ae=String(m[R]);typeof D=="function"&&(ae=D(m[R],R));var ee=C-30+E+R*A,_=f-I-z+35,X=ue(ae,ee,_);N.push(Me([U,F,q,V]),X),X.set({left:Math.floor(ee-X.width/2)+A})}return N},H=function(v){var m=v.oneDayXaxiosWidth,f=v.minDate,y=v.height,N=v.width,R=-20,U=[],F=y-I-z-W;return Object.keys(Ae).forEach(function(q,V,ae){var ee=Ae[q].length,_=W*ee;F-=_,V>0&&(F-=W);var X=new le.fabric.Rect({left:C+E,top:F,width:N-C+Y-E,height:_,fill:"transparent",stroke:"transparent",selectable:!1,hoverCursor:"normal"}),ie=new le.fabric.Textbox(q,{left:X.left,top:X.top,fontSize:14,fontFamily:"\u5FAE\u8F6F\u96C5\u9ED1",fill:"#5B6C7E",selectable:!1,hoverCursor:"normal"}),Le=Math.ceil(X.top+(X.height-ie.height)/2),de=Math.ceil(X.left-ie.width-20);ie.set({top:Le,left:de}),U.push(X),U.push(ie);for(var ge=function(){var je=Ae[q][ve],ke=F+ve*$+ve*1,Ve=Math.ceil((Ut(f,new Date(je.start)).length-1)*m+C+E+A),Se=m*(Ut(new Date(je.start),new Date(je.end)).length-1)+R/2+2,ye=new le.fabric.Rect({left:Ve,top:ke,width:Se,height:$,fill:"transparent",stroke:"transparent",selectable:!1,hoverCursor:"normal"}),_e=ye.left,Fe=[],Ne="",et=[],$e=Ne.length;je.columns.forEach(function(fe,He){var nt=Math.floor(fe.value/Number(q)*ye.width),be=new le.fabric.Rect({left:_e,top:ye.top,width:nt,height:$,fill:fe.background,stroke:fe.background,selectable:!1,hoverCursor:"normal",skewX:R});_e+=nt;var rt=fe.value>0?"".concat(fe.title,"/").concat(fe.value," "):"";Ne+=rt,be.width&&Fe.push(be),et.push({startIndex:$e,endIndex:rt.length+$e,color:fe.color}),$e+=rt.length});var Ge=new le.fabric.Text(Ne,{left:ye.left,top:ye.top,textAlign:"center",fontSize:14,fontFamily:"Arial",fill:"#fff",selectable:!1,hoverCursor:"normal"});et.forEach(function(fe){Ge.setSelectionStyles({fill:fe.color},fe.startIndex,fe.endIndex)});var Ue=Math.ceil(ye.left+(ye.width-Ge.width)/2),pt=Math.ceil(ye.top+(ye.height-Ge.height)/2),tt={left:Ue,top:pt,fill:"red"},Ie=Ge.width+20,Ee=ye.left-C-A,qe=N-(ye.left+ye.width+C)-20;qe>Ie?tt.left=Math.ceil(ye.left+ye.width+20):Ee>Ie?tt.left=Math.ceil(ye.left-Ie):tt.left=Math.ceil(ye.left+ye.width/2-Ie/2),Ge.set(tt),U.push.apply(U,[ye].concat(Fe,[Ge]))},ve=0;ve<Ae[q].length;ve++)ge()}),U},j=function(v){var m=v.canvas,f=v.width,y=f===void 0?0:f,N=pa(b),R=N.minDate,U=N.maxDate,F=Ut(R,U),q=Math.floor((y-E-(C+Y))/A)-1;console.log({xAxiosTickLen:q});for(var V=Math.ceil(F.length/q),ae=[],ee=0;ee<F.length;ee++){var _=F[ee];ee%V===0&&ae.push(_)}var X=A/V;return J({dates:ae,oneDayXaxiosWidth:X,height:T}).forEach(function(ie){m.add(ie)}),m.add(Ce([E+C,T-I-z,y-Y,T-I-z])),m.add(Ce([E+C,I,E+C,T-I-z])),H({oneDayXaxiosWidth:X,minDate:R,height:T,width:y}).forEach(function(ie){m.add(ie)}),m};return(0,g.useLayoutEffect)(function(){var L,v,m=(L=(v=S.current)===null||v===void 0?void 0:v.offsetWidth)!==null&&L!==void 0?L:0,f={selection:!1,width:m,height:T,backgroundColor:B},y=new le.fabric.Canvas(w.current,f);j({canvas:y,width:m});var N=Ot().debounce(function(){var R=document.getElementById("canvas-container"),U=R==null?void 0:R.clientWidth,F=R==null?void 0:R.clientHeight;y.setWidth(U),y.setHeight(F),y.discardActiveObject(),y.requestRenderAll(),y.clear(),j({canvas:y,width:U})},500);return window.addEventListener("resize",N),function(){window.removeEventListener("resize",N)}},[]),(0,r.jsx)("div",{className:"canvas-container",id:"canvas-container",style:{height:"100%"},ref:S,children:(0,r.jsx)("canvas",{ref:w,id:"canvas"})})},Aa=ya;function xa(s){var e=s.open;return(0,r.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("g",{id:"ESG\u76D8\u67E5\u76F8\u5173",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,r.jsx)("g",{id:"\u5207\u56FE\u53CA\u5361\u7247\u89E3\u6790",transform:"translate(-658.000000, -797.000000)",children:(0,r.jsxs)("g",{id:"\u7F16\u7EC4-35\u5907\u4EFD-7",transform:"translate(658.000000, 797.000000)",children:[(0,r.jsx)("circle",{id:"\u692D\u5706\u5F62",fill:"currentColor",cx:"12",cy:"12",r:"12"}),(0,r.jsxs)("g",{id:"\u7F16\u7EC4-38",transform:"translate(5.000000, 5.000000)",fill:"#FFFFFF",children:[(0,r.jsx)("rect",{id:"\u77E9\u5F62",x:"0",y:"6",width:"14",height:"2",rx:"1"}),e&&(0,r.jsx)("rect",{id:"\u77E9\u5F62\u5907\u4EFD",transform:"translate(7.000000, 7.000000) rotate(-270.000000) translate(-7.000000, -7.000000) ",x:"-7.27595761e-12",y:"6",width:"14",height:"2",rx:"1"})]})]})})})})}var wa=function(e){var t=e.data,n=e.filter,a=function(i,c){return c.every(function(u){var h=u.dataIndex,d=u.value;return h.some(function(p){var b=i[p]||"";return typeof b=="string"||Array.isArray(b)&&typeof d=="string"?b.includes(d):Array.isArray(b)&&Array.isArray(d)?b.some(function(w){return d.includes(w)}):b==d})})},o=function l(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i.map(function(u){var h=u.children?l(u.children,!1):[];if(c)return Q()(Q()({},u),{},{children:h.length?h:void 0});var d=a(u,n);return Q()(Q()({},u),{},{isFilter:!d,children:h.length?h:void 0})})};return o(t)},ja=function s(e){var t=e.key,n=e.treeKey,a=n===void 0?"key":n,o=e.dataSource,l=e.updateRecord,i=l===void 0?{}:l;return o.map(function(c){var u;return c[a]==t?Q()(Q()({},c),i):c!=null&&(u=c.children)!==null&&u!==void 0&&u.length?Q()(Q()({},c),{},{children:s({key:t,treeKey:a,dataSource:c.children,updateRecord:i})}):c})},jn=function s(e){var t=e.tree,n=t===void 0?[]:t,a=e.key,o=a===void 0?"key":a,l=e.reset,i=l===void 0?!1:l;return!n||!Array.isArray(n)?[]:n.map(function(c){var u=c.children,h=u===void 0?[]:u,d=c.isOpen,p=d===void 0?!1:d,b=Q()(Q()({},c),{},{key:c[o],isOpen:i?!1:p,opened:!0});return Array.isArray(h)&&h.length>0&&(b.children=s({tree:h,key:o,reset:i})),b})},pe=function(s){return s[s.LOADING=0]="LOADING",s[s.OPEN=1]="OPEN",s[s.CLOSE=2]="CLOSE",s[s.HIDE=3]="HIDE",s}(pe||{}),Ma=function(e){var t=e.isLoadNextChildren,n=t===void 0?!1:t,a=e.data,o=e.request,l=e.completedLoading,i=e.setTree,c=e.extraRender,u=e.cardStyle,h=e.updateTree,d=e.onTreeChange,p=e.treeKey,b=p===void 0?"key":p,w=(0,g.useState)(n?pe.LOADING:pe.CLOSE),S=he()(w,2),M=S[0],T=S[1],A=(0,g.useRef)(null);(0,g.useLayoutEffect)(function(){var E,x,D,W,$=(E=(x=A.current)===null||x===void 0?void 0:x.offsetWidth)!==null&&E!==void 0?E:0,B=(D=(W=A.current)===null||W===void 0?void 0:W.offsetHeight)!==null&&D!==void 0?D:0;l==null||l({width:$,height:B}),!a.isNextLevel&&n&&T(pe.HIDE)},[]);var O={setRecord:function(x,D){P({key:x,record:D})}},P=function(){var E=it()(De()().mark(function x(D){var W,$,B,C,I,Y,z,K,Z,ce,G;return De()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(C=D.key,I=D.record,Y=I===void 0?{}:I,z=D.opened,K=z===void 0?!0:z,Z=pe.HIDE,ce=a.children,!(a!=null&&(W=a.children)!==null&&W!==void 0&&W.length)){ne.next=7;break}M===pe.OPEN?Z=pe.CLOSE:Z=pe.OPEN,ne.next=13;break;case 7:if(typeof o!="function"){ne.next=13;break}return Z=pe.LOADING,T(Z),ne.next=12,new Promise(function(re){o(a).then(function(oe){oe!=null&&oe.length?Z=pe.OPEN:Z=pe.HIDE,re(oe)}).catch(function(){Z=pe.CLOSE,re(null)})});case 12:ce=ne.sent;case 13:h.current=ja({treeKey:b,key:C,dataSource:h.current,updateRecord:Q()({isOpen:K?Z===pe.OPEN:!1,opened:K,children:ce},Y)}),i(h.current),(($=h.current)===null||$===void 0?void 0:$.length)===1&&(d==null||d(h.current)),G=Z,K||(G=pe.CLOSE),(B=ce)!==null&&B!==void 0&&B.length||(G=pe.HIDE),T(G);case 20:case"end":return ne.stop()}},x)}));return function(D){return E.apply(this,arguments)}}();return(0,g.useEffect)(function(){n&&a.opened&&!a.isOpen&&P({key:a[b],opened:!1})},[]),(0,r.jsxs)("div",{ref:A,className:Ye()("qk-card","qk-tree-card-child-node"),style:u,children:[c==null?void 0:c(a,O),(0,r.jsx)("div",{className:Ye()("btn-close-and-open text-[#54A349] hover:text-[#54C245]",{"btn-open":M==pe.CLOSE,"btn-close":M==pe.OPEN,"btn-loading":M==pe.LOADING,invisible:M===pe.HIDE}),onClick:function(){P({key:a[b],opened:!0})},children:M!==pe.HIDE&&M!==pe.LOADING&&(0,r.jsx)(xa,{open:M==pe.CLOSE})})]})},Ca=function s(e){var t=e.request,n=e.className,a=e.treeKey,o=a===void 0?"key":a,l=e.params,i=e.cardStyle,c=i===void 0?{}:i,u=e.extraRender,h=e.isLoadNextChildren,d=h===void 0?!1:h,p=e.onTreeChange,b=e.filter,w=e.tree,S=e.setTree,M=e.updateTree;if(!(!M||!S)){var T=function(O){return b!=null&&b.length?!O.isFilter:!0};return(0,r.jsx)("div",{className:"qk-tree-card",children:w==null?void 0:w.filter(T).map(function(A){var O;return(0,r.jsxs)("div",{className:Ye()("qk-tree-card-column flex","qk-tree-card-column-"+w.filter(T).length),children:[(0,r.jsx)(Ma,{onTreeChange:p,updateTree:M,setTree:S,data:Q()(Q()({},A),{},{params:l}),cardStyle:c,request:t,className:n,tree:w,extraRender:u,isLoadNextChildren:d,filter:b,treeKey:o}),(0,r.jsx)(zt.Z,{mountOnEnter:!0,unmountOnExit:!1,appear:!0,in:A.isOpen&&(A==null||(O=A.children)===null||O===void 0?void 0:O.length),timeout:500,classNames:"qk-tree-card",children:(0,r.jsx)(s,{treeKey:o,request:t,cardStyle:c,isLoadNextChildren:d,filter:b,onTreeChange:p,updateTree:M,data:Q()(Q()({},A),{},{params:l}),params:l,className:n,tree:A.children,setTree:S,extraRender:u})})]},A[o])})})}},La=function(e){var t=e.width,n=t===void 0?400:t,a=e.height,o=a===void 0?200:a,l=e.className,i=l===void 0?"":l,c=e.lineColor,u=c===void 0?"#545C5C":c,h=e.treeData,d=h===void 0?[]:h,p=e.request,b=e.treeKey,w=b===void 0?"key":b,S=e.params,M=e.cardStyle,T=M===void 0?{}:M,A=e.children,O=e.isLoadNextChildren,P=O===void 0?!1:O,E=e.emptyRender,x=e.onTreeChange,D=e.filter,W=(0,g.useRef)([]),$=(0,g.useState)([]),B=he()($,2),C=B[0],I=B[1];(0,g.useEffect)(function(){var z=jn({tree:d,key:w});W.current=z,I(z)},[JSON.stringify(d)]);var Y=function(K){return D!=null&&D.length?!K.isFilter:!0};return(0,dn.Z)(function(){if(D){var z,K=wa({data:W.current,filter:D}),Z=(z=K[0])===null||z===void 0?void 0:z.children.filter(Y);Z.length||fn.ZP.error("\u6CA1\u6709\u67E5\u5230\u60A8\u60F3\u8981\u7684\u6570\u636E"),I(K)}},[D]),(0,g.useEffect)(function(){!(d!=null&&d.length)&&p({params:S,isRootTree:!0}).then(function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],K=jn({tree:z,key:w,reset:!0});W.current=K,x==null||x(z),I(K)})},[JSON.stringify(S)]),C.filter(Y).length===0?E||(0,r.jsx)("div",{className:"text-[#ccc]",children:"\u6682\u65E0\u6570\u636E"}):(0,r.jsx)("div",{style:{"--w":n+"px","--h":o+"px","--line-color":u},className:Ye()(i),children:(0,r.jsx)(Ca,{treeKey:w,request:p,treeData:d,cardStyle:T,isLoadNextChildren:P,filter:D,onTreeChange:x,updateTree:W,data:{params:S},className:i,tree:C,setTree:I,extraRender:A},Object.values(S||"key").join(""))})},Sa=g.memo(La),Na=k(6873),ba=k(20222),Ia=k(68665),Ea=k(89693),Da=k(25085),ka=k(99713),Qa=k.n(ka),Ta=Object.defineProperty,Mn=Object.getOwnPropertySymbols,Ra=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Cn=(s,e,t)=>e in s?Ta(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Oa=(s,e)=>{for(var t in e||(e={}))Ra.call(e,t)&&Cn(s,t,e[t]);if(Mn)for(var t of Mn(e))Pa.call(e,t)&&Cn(s,t,e[t]);return s};const ui=s=>React.createElement("svg",Oa({width:18,height:18,xmlns:"http://www.w3.org/2000/svg"},s),React.createElement("title",null,"\u5220\u9664"),React.createElement("path",{d:"M17.438 3.375h-2.813v-2.25C14.625.506 14.119 0 13.5 0H4.594c-.619 0-1.125.506-1.125 1.125v2.25H.562A.564.564 0 0 0 0 3.938c0 .309.253.562.562.562h16.876c.309 0 .562-.253.562-.563a.564.564 0 0 0-.563-.562Zm-12.842 0-.002-.002V1.127l.002-.002h8.902l.002.002v2.246l-.002.002H4.596Zm10.591 2.25a.562.562 0 0 0-.562.563v10.124c0 .31-.253.563-.563.563H3.938a.564.564 0 0 1-.563-.563V6.188a.562.562 0 1 0-1.125 0v10.124c0 .93.757 1.688 1.688 1.688h10.124a1.69 1.69 0 0 0 1.688-1.688V6.188a.562.562 0 0 0-.563-.563Zm-7.874 8.438V6.188a.564.564 0 0 0-.563-.563.564.564 0 0 0-.562.563v7.875c0 .309.253.562.562.562.31 0 .563-.253.563-.563Zm4.5 0V6.188a.564.564 0 0 0-.563-.563.564.564 0 0 0-.563.563v7.875c0 .309.254.562.563.562.31 0 .563-.253.563-.563Z",className:"icon-delete_svg__iconfill",fill:"#9CA8BA",fillRule:"nonzero"}));var Ln="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE3LjQzOCAzLjM3NWgtMi44MTN2LTIuMjVDMTQuNjI1LjUwNiAxNC4xMTkgMCAxMy41IDBINC41OTRjLS42MTkgMC0xLjEyNS41MDYtMS4xMjUgMS4xMjV2Mi4yNUguNTYyQS41NjQuNTY0IDAgMCAwIDAgMy45MzhjMCAuMzA5LjI1My41NjIuNTYyLjU2MmgxNi44NzZjLjMwOSAwIC41NjItLjI1My41NjItLjU2M2EuNTY0LjU2NCAwIDAgMC0uNTYzLS41NjJabS0xMi44NDIgMC0uMDAyLS4wMDJWMS4xMjdsLjAwMi0uMDAyaDguOTAybC4wMDIuMDAydjIuMjQ2bC0uMDAyLjAwMkg0LjU5NlptMTAuNTkxIDIuMjVhLjU2Mi41NjIgMCAwIDAtLjU2Mi41NjN2MTAuMTI0YzAgLjMxLS4yNTMuNTYzLS41NjMuNTYzSDMuOTM4YS41NjQuNTY0IDAgMCAxLS41NjMtLjU2M1Y2LjE4OGEuNTYyLjU2MiAwIDEgMC0xLjEyNSAwdjEwLjEyNGMwIC45My43NTcgMS42ODggMS42ODggMS42ODhoMTAuMTI0YTEuNjkgMS42OSAwIDAgMCAxLjY4OC0xLjY4OFY2LjE4OGEuNTYyLjU2MiAwIDAgMC0uNTYzLS41NjNabS03Ljg3NCA4LjQzOFY2LjE4OGEuNTY0LjU2NCAwIDAgMC0uNTYzLS41NjMuNTY0LjU2NCAwIDAgMC0uNTYyLjU2M3Y3Ljg3NWMwIC4zMDkuMjUzLjU2Mi41NjIuNTYyLjMxIDAgLjU2My0uMjUzLjU2My0uNTYzWm00LjUgMFY2LjE4OGEuNTY0LjU2NCAwIDAgMC0uNTYzLS41NjMuNTY0LjU2NCAwIDAgMC0uNTYzLjU2M3Y3Ljg3NWMwIC4zMDkuMjU0LjU2Mi41NjMuNTYyLjMxIDAgLjU2My0uMjUzLjU2My0uNTYzWiIgY2xhc3M9Imljb25maWxsIiBmaWxsPSIjOUNBOEJBIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=",Ba=Object.defineProperty,Sn=Object.getOwnPropertySymbols,za=Object.prototype.hasOwnProperty,Fa=Object.prototype.propertyIsEnumerable,Nn=(s,e,t)=>e in s?Ba(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Wa=(s,e)=>{for(var t in e||(e={}))za.call(e,t)&&Nn(s,t,e[t]);if(Sn)for(var t of Sn(e))Fa.call(e,t)&&Nn(s,t,e[t]);return s};const vi=s=>React.createElement("svg",Wa({width:18,height:18,xmlns:"http://www.w3.org/2000/svg"},s),React.createElement("title",null,"\u4E0B\u8F7D"),React.createElement("path",{d:"M17.308 13.154a.692.692 0 0 0-.693.692v2.77H1.385v-2.77a.692.692 0 1 0-1.385 0v3.462c0 .382.31.692.692.692h16.616c.383 0 .692-.31.692-.692v-3.462a.692.692 0 0 0-.692-.692ZM2.847 9.404l5.605 5.61a.69.69 0 0 0 .498.203c.024.002.045.014.069.014a.685.685 0 0 0 .282-.063.683.683 0 0 0 .24-.154l5.61-5.606a.692.692 0 1 0-.978-.98l-4.462 4.46V.692a.692.692 0 1 0-1.385 0v12.23L3.828 8.428a.692.692 0 1 0-.981.976Z",className:"icon-download_svg__iconfill",fill:"#9CA8BA",fillRule:"nonzero"}));var Ha="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE3LjMwOCAxMy4xNTRhLjY5Mi42OTIgMCAwIDAtLjY5My42OTJ2Mi43N0gxLjM4NXYtMi43N2EuNjkyLjY5MiAwIDEgMC0xLjM4NSAwdjMuNDYyYzAgLjM4Mi4zMS42OTIuNjkyLjY5MmgxNi42MTZjLjM4MyAwIC42OTItLjMxLjY5Mi0uNjkydi0zLjQ2MmEuNjkyLjY5MiAwIDAgMC0uNjkyLS42OTJaTTIuODQ3IDkuNDA0bDUuNjA1IDUuNjFhLjY5LjY5IDAgMCAwIC40OTguMjAzYy4wMjQuMDAyLjA0NS4wMTQuMDY5LjAxNGEuNjg1LjY4NSAwIDAgMCAuMjgyLS4wNjMuNjgzLjY4MyAwIDAgMCAuMjQtLjE1NGw1LjYxLTUuNjA2YS42OTIuNjkyIDAgMSAwLS45NzgtLjk4bC00LjQ2MiA0LjQ2Vi42OTJhLjY5Mi42OTIgMCAxIDAtMS4zODUgMHYxMi4yM0wzLjgyOCA4LjQyOGEuNjkyLjY5MiAwIDEgMC0uOTgxLjk3NloiIGNsYXNzPSJpY29uZmlsbCIgZmlsbD0iIzlDQThCQSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9zdmc+",bn=function(e){if(!e)return"other";var t=e.lastIndexOf("."),n=e.substr(t+1).toLowerCase(),a={image:["png","jpg","jpeg","gif","webp","bmp","svg","tiff"],pdf:["pdf"],excel:["xlsx","xls"],word:["docx","doc"],ppt:["ppt","pptx"]};for(var o in a)if(a[o].includes(n))return o;return"other"},Za=function(e,t,n,a,o,l){var i,c=(0,g.useRef)(null);(0,g.useLayoutEffect)(function(){var h;l(((h=c.current)===null||h===void 0?void 0:h.offsetHeight)||0)},[n.length]);var u=t.time?t.time:Qa()(new Date((t==null?void 0:t.lastModified)||new Date)).format("YYYY-MM-DD HH:mm:ss");return(0,r.jsxs)("div",{className:"upload-list-item","data-h":(i=c.current)===null||i===void 0?void 0:i.offsetHeight,ref:c,children:[(0,r.jsxs)("div",{className:"upload-list-item-wrap flex relative",children:[(0,r.jsx)("div",{className:"file-preview icon-".concat(bn(t.name))}),(0,r.jsxs)("div",{className:"file-info flex-1 flex flex-col justify-center items-start overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex w-full overflow-hidden",children:[(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,r.jsx)("span",{className:"file-name",title:t.name,children:t.name})}),(0,r.jsx)("div",{className:"btn-group flex justify-center",children:(0,r.jsxs)(Bt.Z,{size:"large",children:[t.deleteRender!==null&&(0,r.jsx)(Da.Z,{placement:"top",title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onConfirm:a.remove,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,r.jsx)("img",{className:"cursor-pointer",src:Ln})}),t.downloadRender!==null&&(0,r.jsx)("span",{className:"cursor-pointer",onClick:a.download,children:(0,r.jsx)("img",{src:Ha})})]})})]}),(0,r.jsx)("div",{style:{height:"10px"}}),(0,r.jsxs)("div",{className:"flex  w-full",children:[t.size&&(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("span",{children:t.size/1024<1024?(t.size/1024).toFixed(2)+"K":(t.size/1024/1024).toFixed(2)+"M"})}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{children:u})})]})]}),t.status==="uploading"&&(0,r.jsx)("div",{className:"absolute upload-percent justify-center items-center flex w-full h-full left-0 top-0",style:{"--percent":(t.percent||0)+"%"},children:(0,r.jsx)("p",{className:"text-white",children:(t.percent||0)<100?"\u6587\u4EF6\u4E0A\u4F20\u4E2D\uFF0C\u5DF2\u4E0A\u4F20 ".concat(t.percent,"%"):"\u4E0A\u4F20\u5B8C\u6210 !"})})]}),typeof o=="function"?o(t):o]})},Ya=Za,In={expand:{cn:"\u5C55\u5F00",en:"Expand"},collapse:{cn:"\u6536\u8D77",en:"Collapse"}},Ga=["title","theme","uploadButtonRender","placeholder","uploadButtonText","retractionEnable","attachmentListItemFooterExtendRender","tooltip","defaultFileList","fileList","layout","required","uploadClassName","language"],Ua=function(e,t){var n=(0,g.useRef)(null),a=(0,g.useRef)(0),o=Ya,l=e.title,i=e.theme,c=i===void 0?"fund":i,u=e.uploadButtonRender,h=e.placeholder,d=e.uploadButtonText,p=d===void 0?"\u6587\u4EF6\u4E0A\u4F20":d,b=e.retractionEnable,w=b===void 0?!0:b,S=e.attachmentListItemFooterExtendRender,M=S===void 0?null:S,T=e.tooltip,A=T===void 0?"":T,O=e.defaultFileList,P=e.fileList,E=e.layout,x=E===void 0?"vertical":E,D=e.required,W=e.uploadClassName,$=W===void 0?"":W,B=e.language,C=B===void 0?"cn":B,I=Yt()(e,Ga),Y=(0,g.useState)(w?"stow":"open"),z=he()(Y,2),K=z[0],Z=z[1],ce=(0,g.useState)({singleHeight:0,multiHeight:0,actualRows:0,rows:3}),G=he()(ce,2),te=G[0],ne=G[1],re=Q()({defaultFileList:O,fileList:P,showUploadList:!0,itemRender:function(H,j,L,v){return o(H,j,L,v,M,function(m){a.current=m})}},I),oe=(0,g.useRef)(null),we=function(){var H;(H=oe.current)===null||H===void 0||H.click(),Z("open")},Ae=function(){return O!=null&&O.length?(0,r.jsx)(r.Fragment,{}):P!=null&&P.length?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("p",{className:"upload-placeholder",children:h})},Me=l||u?104:40,Ce=(0,g.useCallback)(function(){var J,H,j=(J=(H=n.current)===null||H===void 0?void 0:H.offsetWidth)!==null&&J!==void 0?J:1920,L=0;j<992&&(L=1),j>992&&j<1600&&(L=2),j>1600&&(L=3),((P==null?void 0:P.length)||0)<1&&(L=1);var v=Math.ceil(((P==null?void 0:P.length)||0)/L);ne({singleHeight:(a.current+24)*2+Me,multiHeight:(a.current+24)*v+Me,actualRows:v,rows:L})},[P==null?void 0:P.length]);(0,g.useLayoutEffect)(function(){Ce(),window.addEventListener("resize",Ce)},[P==null?void 0:P.length]),(0,g.useImperativeHandle)(t,function(){return{setRetraction:Z,onTriggerUpload:we}});var ue={collection:"#F6FFFA",operation:"#F6FFFA",certified:"#F6F6FF",fund:"#F6F6FF"};return(0,r.jsxs)("div",{ref:n,className:Ye()("upload-panel",$,"layout-"+x,{"upload-panel--stow":K==="stow","upload-panel--open":K==="open","upload-panel--auto":te.actualRows<3,"not-upload-file":!(P!=null&&P.length)}),style:{height:K==="stow"?te.singleHeight+"px":te.multiHeight+"px","--theme-color":ue[c],"--rows":te.rows},children:[l&&(0,r.jsxs)("div",{className:"upload-panel-header flex",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("span",{className:Ye()("font-bold",{"upload-required":D}),children:l}),A&&(0,r.jsx)(Ia.Z,{placement:"topLeft",title:A,children:(0,r.jsx)("span",{className:"tool-tip",children:(0,r.jsx)(Na.Z,{style:{color:"#5EC385"}})})})]}),u!==null&&(0,r.jsx)("div",{children:u?typeof u=="function"?u({onTriggerUpload:we}):u:(0,r.jsx)(ze.ZP,{onClick:we,icon:(0,r.jsx)(ba.Z,{}),children:p})})]}),(0,r.jsxs)("div",{className:"upload-panel-body upload-list",children:[(0,r.jsx)(Ea.Z,Q()(Q()({},re),{},{children:(0,r.jsx)(ze.ZP,{style:{display:"none"},ref:oe})})),(0,r.jsx)(Ae,{})]}),w&&te.actualRows>2&&(0,r.jsx)("div",{className:"".concat(M!==null?"retraction retraction-extra-footer":"retraction"," "),children:(0,r.jsxs)(ze.ZP,{className:"btn-retraction",type:"link",size:"small",onClick:function(){Z(function(H){return H==="stow"?"open":"stow"})},children:[(0,r.jsx)("span",{children:K==="stow"?In.expand[C]:In.collapse[C]}),(0,r.jsx)(en.Z,{})]})})]})},Ka=(0,g.forwardRef)(Ua),Ja=function(e,t,n,a){return(0,r.jsx)("div",{className:"upload-list-item upload-simple-list-item",children:(0,r.jsxs)("div",{className:"upload-list-item-wrap flex relative",children:[(0,r.jsx)("div",{className:"file-preview icon-".concat(bn(t.name))}),(0,r.jsxs)("div",{className:"file-info flex-1 flex flex-col justify-center items-start overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex w-full overflow-hidden",children:[(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,r.jsx)("span",{className:"file-name",title:t.name,children:t.name})}),(0,r.jsx)("div",{className:"btn-group flex justify-center items-center",onClick:a.remove,children:t.downloadRender!==null&&(0,r.jsx)("img",{src:Ln,title:"\u5220\u9664",alt:"\u5220\u9664"})})]}),(0,r.jsx)("div",{style:{height:"10px"}})]})]})})},fi=function(e){return new Promise(function(t){return setTimeout(t,e)})},$a=function(e){var t=0,n={},a=new IntersectionObserver(function(l){l.forEach(function(i){var c=i.target.getAttribute("uuid"),u=n[c],h=u.render,d=u.delay,p=u.SetVisible;i.isIntersecting&&setTimeout(function(){h(!0)},d),p(i.isIntersecting)})},e),o=function(i){var c=i.delay,u=c===void 0?0:c,h=i.children,d=i.placeholder;u=u||(e==null?void 0:e.delay)||0,d=d||(e==null?void 0:e.placeholder)||"\u52A0\u8F7D\u4E2D...",typeof d=="function"&&(d=d());var p=(0,g.useRef)(null),b=(0,g.useState)(!1),w=he()(b,2),S=w[0],M=w[1],T=(0,g.useState)(!1),A=he()(T,2),O=A[0],P=A[1];(0,g.useEffect)(function(){t++;var x=p.current;x.setAttribute("uuid",String(t)),x&&a.observe(x),n[t]={render:M,delay:u,SetVisible:P,visible:O}},[]);var E=h;return typeof h=="function"&&(E=h(O)),(0,r.jsx)("div",{ref:p,children:S?E:d})};return o},qa=$a,Xa=["children"],Va=function s(e){for(var t=e.data,n=t===void 0?[]:t,a=e.flatData,o=a===void 0?[]:a,l=e.childrenKey,i=l===void 0?"routes":l,c=e.filter,u=0;u<n.length;u++)if(!(typeof c=="function"&&!c(n[u]))){var h=n[u][i];h!=null&&h.length?(o.push(n[u]),s({data:h,flatData:o,filter:c})):o.push(n[u])}return o},_a=function(e){var t={},n=function a(o){o.forEach(function(l){var i;t[l.path]={path:l.path,name:l.name},l!=null&&(i=l.children)!==null&&i!==void 0&&i.length&&a(l.children)})};return n(e),t},ei=function(e,t){return Math.round(Math.random()*(t-e))+e},ti=function s(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.forEach(function(n){var a=n.children,o=Yt()(n,Xa);t[n.path]=o,a!=null&&a.length&&s(a,t)}),t},ni=function s(e){var t,n=e.routes,a=e.childrenKye,o=a===void 0?"children":a,l=he()(n,1),i=l[0],c=i===void 0?{}:i;return!(c!=null&&c.component)&&(t=c[o])!==null&&t!==void 0&&t.length&&!c.redirect?s({routes:c[o],childrenKye:o}):c},ri=function(){var e=window.navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/)||e.indexOf("Samsung")>-1,ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")==-1,weixin:e.indexOf("MicroMessenger")>-1,userAgent:e}},En=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n={},a=window.location,o=a.origin,l=a.pathname,i=a.hash,c=a.href,u=c.split("#")[1].split("?");u.length===2&&(u=u[1],u=u.split("&"),u.map(function(M){var T=M.split("="),A=T[0];n[A]=T[1]})),t&&(e=Object.assign({},n,e));var h="";for(var d in e)h+="".concat(d,"=").concat(e[d],"&");h=h.substring(0,h.length-1);var p=i.split("?"),b=he()(p,1),w=b[0],S="".concat(o).concat(l).concat(w,"?").concat(h);window.history.replaceState(null,"",S)},ai=function(e){var t=e.url,n=e.name,a=document.createElement("a");a.style.display="none",a.href=t,a.setAttribute("download",decodeURIComponent(n)),document.body.appendChild(a),a.click()}},9443:function(){},58113:function(){},80051:function(){}}]);
